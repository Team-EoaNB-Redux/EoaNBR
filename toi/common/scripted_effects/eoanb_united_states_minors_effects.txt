ASA_decrease_anarchist_riots = {
    if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_5
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_5
            add_idea = ASA_Anarchist_Strikes_level_4
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_4
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_4
            add_idea = ASA_Anarchist_Strikes_level_3
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_3
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_3
            add_idea = ASA_Anarchist_Strikes_level_2
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_2
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_2
            add_idea = ASA_Anarchist_Strikes_level_1
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_1
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_1
        }
    }
    else = {
        add_stability = 0.02
    }
}

ASA_increase_anarchist_riots = {
    if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_1
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_1
            add_idea = ASA_Anarchist_Strikes_level_2
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_2
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_2
            add_idea = ASA_Anarchist_Strikes_level_3
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_3
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_3
            add_idea = ASA_Anarchist_Strikes_level_4
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_4
        }
        swap_ideas = {
            remove_idea = ASA_Anarchist_Strikes_level_4
            add_idea = ASA_Anarchist_Strikes_level_5
        }
    }
    else = {
        add_stability = -0.02
    }
}

ASA_remove_anarchist_riots = {
    if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_1
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_1
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_2
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_2
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_3
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_3
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_4
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_4
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_Anarchist_Strikes_level_5
        }
        remove_ideas = {
            ASA_Anarchist_Strikes_level_5
        }
    }
}

### Buy rifles ###
NA_B_buy_oldest_rifles = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_4
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_5
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_4
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_22
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_21
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment22
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_20
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_19
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_18
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment19
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_17
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_16
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_15
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment16
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_14
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_13
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_12
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_11
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_10
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_9
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_8
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_7
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_6
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_5
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_4
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 1000
            }
        }
    }
}
NA_B_buy_second_oldest_rifles = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_5
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_4
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_5
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_4
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_22
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment22
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_21
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_20
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_19
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment19
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_18
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_17
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_16
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment16
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_15
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_14
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_13
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_11
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_10
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_9
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_8
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_7
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_6
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_5
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_4
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 500
            }
        }
    }
}
NA_B_buy_newest_rifles = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_6
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_5
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_railgun_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_railgun_rifle_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_5
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_plasma_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_plasma_rifle_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment22
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_22
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_21
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_20
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_18
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_17
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment16
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_16
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_15
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_14
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_13
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment12
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_12
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_11
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_10
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_9
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_8
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_7
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_6
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_5
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_rifle_equipment1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = infantry_equipment_rifle_1
                amount = 250
            }
        }
    }
}
### Buy Uniforms ###
NA_B_buy_oldest_uniforms = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_25
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_22
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_24
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_21
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_23
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_20
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_19
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_18
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_17
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_19
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_16
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_15
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_14
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_13
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_12
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_11
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_12
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_10
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_9
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_8
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_7
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_6
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_5
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_4
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 1000
            }
        }
    }
}
NA_B_buy_second_oldest_uniforms = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_0
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_0
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_exoskeletal_suits
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_24
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_25
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_23
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_24
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_22
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_23
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_21
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_20
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_19
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_18
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_19
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_17
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_16
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_15
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_14
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_13
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_12
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_12
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_11
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_10
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_9
                amount = 500
            }
        }
    }
     else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_8
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_7
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_6
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_5
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_4
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 500
            }
        }
    }
}
NA_B_buy_newest_uniforms = {
    if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_power_armor_equipment_0
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_exoskeletal_suits
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = power_armor_equipment_0
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_25
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_24
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_24
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_23
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_23
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_22
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_21
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_21
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_20
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_20
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_19
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_19
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_18
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_18
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_17
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_17
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_16
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_15
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_15
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_14
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_14
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_13
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_13
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_12
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_12
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_11
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_11
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_10
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_10
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_9
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_9
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_8
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_7
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_6
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_5
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = tech_uniform_equipment_1
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = uniform_equipment_0
                amount = 250
            }
        }
    }
}
### Buy Cannons ###
NA_B_buy_oldest_cannons = {
    if = {
        limit = {
            FROM = {
                has_tech = artillery_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_5
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_4
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_3
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = combined_artillery_battalions
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_2
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = field_gun_1895
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rbl_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_1
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rml_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_smoothbore
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 1000
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = gw_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 1000
            }
        }
    }
}
NA_B_buy_second_oldest_cannons = {
    if = {
        limit = {
            FROM = {
                has_tech = artillery_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_6
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_5
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_4
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_0
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = combined_artillery_battalions
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_3
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = field_gun_1895
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_2
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rbl_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_0
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rml_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_1
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_smoothbore
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 500
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = gw_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 500
            }
        }
    }
}
NA_B_buy_newest_cannons = {
    if = {
        limit = {
            FROM = {
                has_tech = artillery_8
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_7
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_7
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_6
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_6
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_5
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_5
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_4
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_4
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_3
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = artillery_2
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = combined_artillery_battalions
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = artillery_equipment_0
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = field_gun_1895
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_3
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_2
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rbl_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = rml_field_gun
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = rifled_cannon_equipment_0
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = improved_smoothbore
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_1
                amount = 250
            }
        }
    }
    else_if = {
        limit = {
            FROM = {
                has_tech = gw_artillery
            }
        }
        ROOT = {
            add_equipment_to_stockpile = {
                type = cannon_equipment_0
                amount = 250
            }
        }
    }
}

ASA_Count_McClellan_Terms = {
    add_to_variable = {
        var = asa_mcclellan_term_count
        value = 1
    }
    if = {
        limit = {
			check_variable = { asa_mcclellan_term_count > 2 }
        }
        complete_national_focus = ASA_McClellan_Third_Term
        mark_focus_tree_layout_dirty = yes
    }
    else = {}
}

ASA_improve_national_bank = {
    if = {
        limit = {
            NOT = {
                has_idea = ASA_National_Bank_level_1
            }
        }
        add_ideas = ASA_National_Bank_level_1
    }
    else_if = {
        limit = {
            has_idea = ASA_National_Bank_level_1
        }
        swap_ideas = {
            remove_idea = ASA_National_Bank_level_1
            add_idea = ASA_National_Bank_level_2
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_National_Bank_level_2
        }
        swap_ideas = {
            remove_idea = ASA_National_Bank_level_2
            add_idea = ASA_National_Bank_level_3
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_National_Bank_level_3
        }
        swap_ideas = {
            remove_idea = ASA_National_Bank_level_3
            add_idea = ASA_National_Bank_level_4
        }
    }
    else_if = {
        limit = {
            has_idea = ASA_National_Bank_level_4
        }
        swap_ideas = {
            remove_idea = ASA_National_Bank_level_4
            add_idea = ASA_National_Bank_level_5
        }
    }
}

spawn_asian_treaty_port_garrisons = {
    custom_effect_tooltip = spawn_asian_treaty_port_garrisons_tt
    hidden_effect = {
        if = {
            limit = {
                NOT = {
                    has_template = "Treaty Port Garrison"
                }
            }
            division_template = {
                name = "Treaty Port Garrison"
                priority = 1
                is_locked = yes

                regiments = {
                    guard_infantry = { x = 0 y = 0 }
                    mounted_infantry = { x = 1 y = 0 }
                    guard_infantry = { x = 0 y = 1 }
                    mounted_infantry = { x = 1 y = 1 }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1260
                        controls_state = 1260
                    }
                }
                1260 = {
                    create_unit = {
                        division = "name = \"Nagasaki Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1324
                        controls_state = 1324
                    }
                }
                1324 = {
                    create_unit = {
                        division = "name = \"Kokura Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 531
                        controls_state = 531
                    }
                }
                531 = {
                    create_unit = {
                        division = "name = \"Bingo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1266
                        controls_state = 1266
                    }
                }
                1266 = {
                    create_unit = {
                        division = "name = \"Yokohama Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 530
                        controls_state = 530
                    }
                }
                530 = {
                    create_unit = {
                        division = "name = \"Niigata Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1156
                        controls_state = 1156
                    }
                }
                1156 = {
                    create_unit = {
                        division = "name = \"Qinzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 728
                        controls_state = 728
                    }
                }
                728 = {
                    create_unit = {
                        division = "name = \"Guangzhouwan Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1157
                        controls_state = 1157
                    }
                }
                1157 = {
                    create_unit = {
                        division = "name = \"Yangjiang Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1158
                        controls_state = 1158
                    }
                }
                1158 = {
                    create_unit = {
                        division = "name = \"Shantou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1159
                        controls_state = 1159
                    }
                }
                1159 = {
                    create_unit = {
                        division = "name = \"Fuzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1160
                        controls_state = 1160
                    }
                }
                1160 = {
                    create_unit = {
                        division = "name = \"Wenzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1161
                        controls_state = 1161
                    }
                }
                1161 = {
                    create_unit = {
                        division = "name = \"Ningbo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1162
                        controls_state = 1162
                    }
                }
                1162 = {
                    create_unit = {
                        division = "name = \"Hangzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1163
                        controls_state = 1163
                    }
                }
                1163 = {
                    create_unit = {
                        division = "name = \"Fen Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1164
                        controls_state = 1164
                    }
                }
                1164 = {
                    create_unit = {
                        division = "name = \"Baoshan Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1165
                        controls_state = 1165
                    }
                }
                1165 = {
                    create_unit = {
                        division = "name = \"Chon Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1166
                        controls_state = 1166
                    }
                }
                1166 = {
                    create_unit = {
                        division = "name = \"Yancheng Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1168
                        controls_state = 1168
                    }
                }
                1168 = {
                    create_unit = {
                        division = "name = \"Tsingtao Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1169
                        controls_state = 1169
                    }
                }
                1169 = {
                    create_unit = {
                        division = "name = \"Kenli Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1170
                        controls_state = 1170
                    }
                }
                1170 = {
                    create_unit = {
                        division = "name = \"Hekuo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1171
                        controls_state = 1171
                    }
                }
                1171 = {
                    create_unit = {
                        division = "name = \"Caofeidian Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1172
                        controls_state = 1172
                    }
                }
                1172 = {
                    create_unit = {
                        division = "name = \"Laoting Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1173
                        controls_state = 1173
                    }
                }
                1173 = {
                    create_unit = {
                        division = "name = \"Qinhuagado Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1025
                        controls_state = 1025
                    }
                }
                1025 = {
                    create_unit = {
                        division = "name = \"Dalian Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1174
                        controls_state = 1174
                    }
                }
                1174 = {
                    create_unit = {
                        division = "name = \"Andong Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 326
                        controls_state = 326
                    }
                }
                326 = {
                    create_unit = {
                        division = "name = \"Hong Kong Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 729
                        controls_state = 729
                    }
                }
                729 = {
                    create_unit = {
                        division = "name = \"Macau Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
        }
        else_if = {
            limit = {
                has_template = "Treaty Port Garrison"
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1260
                        controls_state = 1260
                    }
                }
                1260 = {
                    create_unit = {
                        division = "name = \"Nagasaki Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1324
                        controls_state = 1324
                    }
                }
                1324 = {
                    create_unit = {
                        division = "name = \"Kokura Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 531
                        controls_state = 531
                    }
                }
                531 = {
                    create_unit = {
                        division = "name = \"Bingo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1266
                        controls_state = 1266
                    }
                }
                1266 = {
                    create_unit = {
                        division = "name = \"Yokohama Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 530
                        controls_state = 530
                    }
                }
                530 = {
                    create_unit = {
                        division = "name = \"Niigata Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1156
                        controls_state = 1156
                    }
                }
                1156 = {
                    create_unit = {
                        division = "name = \"Qinzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 728
                        controls_state = 728
                    }
                }
                728 = {
                    create_unit = {
                        division = "name = \"Guangzhouwan Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1157
                        controls_state = 1157
                    }
                }
                1157 = {
                    create_unit = {
                        division = "name = \"Yangjiang Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1158
                        controls_state = 1158
                    }
                }
                1158 = {
                    create_unit = {
                        division = "name = \"Shantou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1159
                        controls_state = 1159
                    }
                }
                1159 = {
                    create_unit = {
                        division = "name = \"Fuzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1160
                        controls_state = 1160
                    }
                }
                1160 = {
                    create_unit = {
                        division = "name = \"Wenzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1161
                        controls_state = 1161
                    }
                }
                1161 = {
                    create_unit = {
                        division = "name = \"Ningbo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1162
                        controls_state = 1162
                    }
                }
                1162 = {
                    create_unit = {
                        division = "name = \"Hangzhou Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1163
                        controls_state = 1163
                    }
                }
                1163 = {
                    create_unit = {
                        division = "name = \"Fen Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1164
                        controls_state = 1164
                    }
                }
                1164 = {
                    create_unit = {
                        division = "name = \"Baoshan Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1165
                        controls_state = 1165
                    }
                }
                1165 = {
                    create_unit = {
                        division = "name = \"Chon Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1166
                        controls_state = 1166
                    }
                }
                1166 = {
                    create_unit = {
                        division = "name = \"Yancheng Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1168
                        controls_state = 1168
                    }
                }
                1168 = {
                    create_unit = {
                        division = "name = \"Tsingtao Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1169
                        controls_state = 1169
                    }
                }
                1169 = {
                    create_unit = {
                        division = "name = \"Kenli Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1170
                        controls_state = 1170
                    }
                }
                1170 = {
                    create_unit = {
                        division = "name = \"Hekuo Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1171
                        controls_state = 1171
                    }
                }
                1171 = {
                    create_unit = {
                        division = "name = \"Caofeidian Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1172
                        controls_state = 1172
                    }
                }
                1172 = {
                    create_unit = {
                        division = "name = \"Laoting Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1173
                        controls_state = 1173
                    }
                }
                1173 = {
                    create_unit = {
                        division = "name = \"Qinhuagado Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1025
                        controls_state = 1025
                    }
                }
                1025 = {
                    create_unit = {
                        division = "name = \"Dalian Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 1174
                        controls_state = 1174
                    }
                }
                1174 = {
                    create_unit = {
                        division = "name = \"Andong Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 326
                        controls_state = 326
                    }
                }
                326 = {
                    create_unit = {
                        division = "name = \"Hong Kong Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        owns_state = 729
                        controls_state = 729
                    }
                }
                729 = {
                    create_unit = {
                        division = "name = \"Macau Garrison\" division_template = \"Treaty Port Garrison\" start_experience_factor = 0.0 start_equipment_factor = 0.01"
                        allow_spawning_on_enemy_provs = yes
                        owner = ROOT
                        id = asian_treaty_port_garrison
                    }
                }
            }
        }
    }
}
NA_B_calculator_state_party_popularity_effect = {
	custom_effect_tooltip = PS_tooltip_increase_by_one
	hidden_effect = {
		set_variable = { var = THIS.NA_B_active_state_centrism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_traditional_conservatism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_social_egalitarianism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_collectivist_socialism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_vanguard_communism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_autocracy_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_fundamentalism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_radical_democracy_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_chauvinist_populism_senate_seat@THIS value = 0 }
		set_variable = { var = THIS.NA_B_active_state_anarchism_senate_seat@THIS value = 0 }
		random_list = {
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_centrism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						centrism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						centrism > 0.01
						centrism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						centrism > 0.10
						centrism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						centrism > 0.20
						centrism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						centrism > 0.30
						centrism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						centrism > 0.40
						centrism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						centrism > 0.50
						centrism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						centrism > 0.60
						centrism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						centrism > 0.70
						centrism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						centrism > 0.80
						centrism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						centrism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_traditional_conservatism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						traditional_conservatism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						traditional_conservatism > 0.01
						traditional_conservatism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						traditional_conservatism > 0.10
						traditional_conservatism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						traditional_conservatism > 0.20
						traditional_conservatism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						traditional_conservatism > 0.30
						traditional_conservatism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						traditional_conservatism > 0.40
						traditional_conservatism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						traditional_conservatism > 0.50
						traditional_conservatism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						traditional_conservatism > 0.60
						traditional_conservatism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						traditional_conservatism > 0.70
						traditional_conservatism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						traditional_conservatism > 0.80
						traditional_conservatism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						traditional_conservatism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_social_egalitarianism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						social_egalitarianism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						social_egalitarianism > 0.01
						social_egalitarianism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						social_egalitarianism > 0.10
						social_egalitarianism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						social_egalitarianism > 0.20
						social_egalitarianism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						social_egalitarianism > 0.30
						social_egalitarianism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						social_egalitarianism > 0.40
						social_egalitarianism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						social_egalitarianism > 0.50
						social_egalitarianism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						social_egalitarianism > 0.60
						social_egalitarianism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						social_egalitarianism > 0.70
						social_egalitarianism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						social_egalitarianism > 0.80
						social_egalitarianism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						social_egalitarianism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_collectivist_socialism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						collectivist_socialism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						collectivist_socialism > 0.01
						collectivist_socialism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						collectivist_socialism > 0.10
						collectivist_socialism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						collectivist_socialism > 0.20
						collectivist_socialism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						collectivist_socialism > 0.30
						collectivist_socialism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						collectivist_socialism > 0.40
						collectivist_socialism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						collectivist_socialism > 0.50
						collectivist_socialism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						collectivist_socialism > 0.60
						collectivist_socialism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						collectivist_socialism > 0.70
						collectivist_socialism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						collectivist_socialism > 0.80
						collectivist_socialism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						collectivist_socialism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_vanguard_communism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						vanguard_communism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						vanguard_communism > 0.01
						vanguard_communism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						vanguard_communism > 0.10
						vanguard_communism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						vanguard_communism > 0.20
						vanguard_communism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						vanguard_communism > 0.30
						vanguard_communism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						vanguard_communism > 0.40
						vanguard_communism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						vanguard_communism > 0.50
						vanguard_communism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						vanguard_communism > 0.60
						vanguard_communism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						vanguard_communism > 0.70
						vanguard_communism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						vanguard_communism > 0.80
						vanguard_communism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						vanguard_communism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_autocracy_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						autocracy < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						autocracy > 0.01
						autocracy < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						autocracy > 0.10
						autocracy < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						autocracy > 0.20
						autocracy < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						autocracy > 0.30
						autocracy < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						autocracy > 0.40
						autocracy < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						autocracy > 0.50
						autocracy < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						autocracy > 0.60
						autocracy < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						autocracy > 0.70
						autocracy < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						autocracy > 0.80
						autocracy < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						autocracy > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_fundamentalism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						fundamentalism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						fundamentalism > 0.01
						fundamentalism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						fundamentalism > 0.10
						fundamentalism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						fundamentalism > 0.20
						fundamentalism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						fundamentalism > 0.30
						fundamentalism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						fundamentalism > 0.40
						fundamentalism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						fundamentalism > 0.50
						fundamentalism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						fundamentalism > 0.60
						fundamentalism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						fundamentalism > 0.70
						fundamentalism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						fundamentalism > 0.80
						fundamentalism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						fundamentalism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_radical_democracy_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						radical_democracy < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						radical_democracy > 0.01
						radical_democracy < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						radical_democracy > 0.10
						radical_democracy < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						radical_democracy > 0.20
						radical_democracy < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						radical_democracy > 0.30
						radical_democracy < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						radical_democracy > 0.40
						radical_democracy < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						radical_democracy > 0.50
						radical_democracy < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						radical_democracy > 0.60
						radical_democracy < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						radical_democracy > 0.70
						radical_democracy < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						radical_democracy > 0.80
						radical_democracy < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						radical_democracy > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_chauvinist_populism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						chauvinist_populism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						chauvinist_populism > 0.01
						chauvinist_populism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						chauvinist_populism > 0.10
						chauvinist_populism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						chauvinist_populism > 0.20
						chauvinist_populism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						chauvinist_populism > 0.30
						chauvinist_populism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						chauvinist_populism > 0.40
						chauvinist_populism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						chauvinist_populism > 0.50
						chauvinist_populism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						chauvinist_populism > 0.60
						chauvinist_populism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						chauvinist_populism > 0.70
						chauvinist_populism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						chauvinist_populism > 0.80
						chauvinist_populism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						chauvinist_populism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_anarchism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						anarchism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						anarchism > 0.01
						anarchism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						anarchism > 0.10
						anarchism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						anarchism > 0.20
						anarchism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						anarchism > 0.30
						anarchism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						anarchism > 0.40
						anarchism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						anarchism > 0.50
						anarchism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						anarchism > 0.60
						anarchism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						anarchism > 0.70
						anarchism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						anarchism > 0.80
						anarchism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						anarchism > 0.90
					}
				}
			}
		}
		random_list = {
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_centrism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						centrism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						centrism > 0.01
						centrism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						centrism > 0.10
						centrism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						centrism > 0.20
						centrism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						centrism > 0.30
						centrism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						centrism > 0.40
						centrism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						centrism > 0.50
						centrism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						centrism > 0.60
						centrism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						centrism > 0.70
						centrism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						centrism > 0.80
						centrism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						centrism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_traditional_conservatism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						traditional_conservatism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						traditional_conservatism > 0.01
						traditional_conservatism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						traditional_conservatism > 0.10
						traditional_conservatism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						traditional_conservatism > 0.20
						traditional_conservatism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						traditional_conservatism > 0.30
						traditional_conservatism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						traditional_conservatism > 0.40
						traditional_conservatism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						traditional_conservatism > 0.50
						traditional_conservatism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						traditional_conservatism > 0.60
						traditional_conservatism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						traditional_conservatism > 0.70
						traditional_conservatism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						traditional_conservatism > 0.80
						traditional_conservatism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						traditional_conservatism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_social_egalitarianism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						social_egalitarianism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						social_egalitarianism > 0.01
						social_egalitarianism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						social_egalitarianism > 0.10
						social_egalitarianism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						social_egalitarianism > 0.20
						social_egalitarianism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						social_egalitarianism > 0.30
						social_egalitarianism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						social_egalitarianism > 0.40
						social_egalitarianism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						social_egalitarianism > 0.50
						social_egalitarianism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						social_egalitarianism > 0.60
						social_egalitarianism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						social_egalitarianism > 0.70
						social_egalitarianism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						social_egalitarianism > 0.80
						social_egalitarianism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						social_egalitarianism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_collectivist_socialism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						collectivist_socialism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						collectivist_socialism > 0.01
						collectivist_socialism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						collectivist_socialism > 0.10
						collectivist_socialism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						collectivist_socialism > 0.20
						collectivist_socialism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						collectivist_socialism > 0.30
						collectivist_socialism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						collectivist_socialism > 0.40
						collectivist_socialism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						collectivist_socialism > 0.50
						collectivist_socialism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						collectivist_socialism > 0.60
						collectivist_socialism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						collectivist_socialism > 0.70
						collectivist_socialism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						collectivist_socialism > 0.80
						collectivist_socialism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						collectivist_socialism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_vanguard_communism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						vanguard_communism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						vanguard_communism > 0.01
						vanguard_communism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						vanguard_communism > 0.10
						vanguard_communism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						vanguard_communism > 0.20
						vanguard_communism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						vanguard_communism > 0.30
						vanguard_communism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						vanguard_communism > 0.40
						vanguard_communism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						vanguard_communism > 0.50
						vanguard_communism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						vanguard_communism > 0.60
						vanguard_communism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						vanguard_communism > 0.70
						vanguard_communism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						vanguard_communism > 0.80
						vanguard_communism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						vanguard_communism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_autocracy_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						autocracy < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						autocracy > 0.01
						autocracy < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						autocracy > 0.10
						autocracy < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						autocracy > 0.20
						autocracy < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						autocracy > 0.30
						autocracy < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						autocracy > 0.40
						autocracy < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						autocracy > 0.50
						autocracy < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						autocracy > 0.60
						autocracy < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						autocracy > 0.70
						autocracy < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						autocracy > 0.80
						autocracy < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						autocracy > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_fundamentalism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						fundamentalism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						fundamentalism > 0.01
						fundamentalism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						fundamentalism > 0.10
						fundamentalism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						fundamentalism > 0.20
						fundamentalism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						fundamentalism > 0.30
						fundamentalism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						fundamentalism > 0.40
						fundamentalism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						fundamentalism > 0.50
						fundamentalism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						fundamentalism > 0.60
						fundamentalism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						fundamentalism > 0.70
						fundamentalism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						fundamentalism > 0.80
						fundamentalism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						fundamentalism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_radical_democracy_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						radical_democracy < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						radical_democracy > 0.01
						radical_democracy < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						radical_democracy > 0.10
						radical_democracy < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						radical_democracy > 0.20
						radical_democracy < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						radical_democracy > 0.30
						radical_democracy < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						radical_democracy > 0.40
						radical_democracy < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						radical_democracy > 0.50
						radical_democracy < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						radical_democracy > 0.60
						radical_democracy < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						radical_democracy > 0.70
						radical_democracy < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						radical_democracy > 0.80
						radical_democracy < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						radical_democracy > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_chauvinist_populism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						chauvinist_populism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						chauvinist_populism > 0.01
						chauvinist_populism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						chauvinist_populism > 0.10
						chauvinist_populism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						chauvinist_populism > 0.20
						chauvinist_populism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						chauvinist_populism > 0.30
						chauvinist_populism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						chauvinist_populism > 0.40
						chauvinist_populism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						chauvinist_populism > 0.50
						chauvinist_populism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						chauvinist_populism > 0.60
						chauvinist_populism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						chauvinist_populism > 0.70
						chauvinist_populism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						chauvinist_populism > 0.80
						chauvinist_populism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						chauvinist_populism > 0.90
					}
				}
			}
			10 = {
				add_to_variable = { var = THIS.NA_B_active_state_anarchism_senate_seat@THIS value = 1 }
				modifier = {
					add = -10
					OWNER = {
						anarchism < 0.01
					}
				}
				modifier = {
					add = -8
					OWNER = {
						anarchism > 0.01
						anarchism < 0.10
					}
				}
				modifier = {
					add = -5
					OWNER = {
						anarchism > 0.10
						anarchism < 0.20
					}
				}
				modifier = {
					add = 6
					OWNER = {
						anarchism > 0.20
						anarchism < 0.30
					}
				}
				modifier = {
					add = 8
					OWNER = {
						anarchism > 0.30
						anarchism < 0.40
					}
				}
				modifier = {
					add = 10
					OWNER = {
						anarchism > 0.40
						anarchism < 0.50
					}
				}
				modifier = {
					add = 12
					OWNER = {
						anarchism > 0.50
						anarchism < 0.60
					}
				}
				modifier = {
					add = 14
					OWNER = {
						anarchism > 0.60
						anarchism < 0.70
					}
				}
				modifier = {
					add = 16
					OWNER = {
						anarchism > 0.70
						anarchism < 0.80
					}
				}
				modifier = {
					add = 18
					OWNER = {
						anarchism > 0.80
						anarchism < 0.90
					}
				}
				modifier = {
					add = 20
					OWNER = {
						anarchism > 0.90
					}
				}
			}
		}
	}
}
KNS_fire_random_election_event = {
	hidden_effect = {
		random_list = {
			10 = {
				modifier = {
					factor = 1.5
					has_country_flag = KNS_lawrence_raid	#As to make Robinson events have the same chance to happen as for any other candidate
				}
				country_event = { id = kansas_election.1 days = 15 random_days = 20 }
			}
			10 = {
				modifier = {
					factor = 1.5
					has_country_flag = KNS_lawrence_raid
				}
				country_event = { id = kansas_election.2 days = 15 random_days = 20 }
			}
			10 = {
				modifier = {
					factor = 0
					has_country_flag = KNS_lawrence_raid	#Can't have Lawrence be raided twice
				}
				country_event = { id = kansas_election.3 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.4 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.5 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.6 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.7 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.8 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.9 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.10 days = 15 random_days = 20 }
			}
			10 = {
				country_event = { id = kansas_election.11 days = 15 random_days = 20 }
			}
		}
	}
}
KNS_fire_random_bloody_kansas_event = {
	hidden_effect = {
		random_list = {
			18 = {
				country_event = { id = bloody_kansas.1 days = 75 random_days = 50 }
			}
			12 = {
				country_event = { id = bloody_kansas.2 days = 75 random_days = 50 }
			}
			12 = {
				country_event = { id = bloody_kansas.3 days = 75 random_days = 50 }
			}
			8 = {
				country_event = { id = bloody_kansas.4 days = 75 random_days = 50 }
			}
			18 = {
				country_event = { id = bloody_kansas.5 days = 75 random_days = 50 }
			}
			12 = {
				country_event = { id = bloody_kansas.6 days = 75 random_days = 50 }
			}
			12 = {
				country_event = { id = bloody_kansas.7 days = 75 random_days = 50 }
			}
			8 = {
				country_event = { id = bloody_kansas.8 days = 75 random_days = 50 }
			}
		}
	}
}
KNS_bloody_kansas_check = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { KNS_bloody_kansas > 10 }
			}
			country_event = { id = bloody_kansas.10 days = 25 random_days = 25 }
		}
		if = {
			limit = {
				check_variable = { KNS_bloody_kansas < 1 }
			}
			country_event = { id = bloody_kansas.9 days = 1 }
		}
	}
}
KNS_increase_bloody_kansas_by_one = {
	custom_effect_tooltip = KNS_increase_bloody_kansas_by_one
	add_to_variable = { KNS_bloody_kansas = 1 }
	add_to_variable = { KNS_bloody_kansas_1 = -1 }
	add_to_variable = { KNS_bloody_kansas_2 = 0.001 }
	add_to_variable = { KNS_bloody_kansas_3 = -0.01 }
	KNS_bloody_kansas_check = yes
}
KNS_decrease_bloody_kansas_by_one = {
	custom_effect_tooltip = KNS_decrease_bloody_kansas_by_one
	add_to_variable = { KNS_bloody_kansas = -1 }
	add_to_variable = { KNS_bloody_kansas_1 = 1 }
	add_to_variable = { KNS_bloody_kansas_2 = -0.001 }
	add_to_variable = { KNS_bloody_kansas_3 = 0.01 }
	KNS_bloody_kansas_check = yes
}
KNS_set_up_the_country = {
	if = {
		limit = {	
			always = no			#Disabled
		}
		load_focus_tree = kansas_vic_ft
		KNS_fire_random_election_event = yes
		KNS_fire_random_bloody_kansas_event = yes
		if = {
			limit = {
				NOT = {
					has_global_flag = NA_B_John_Brown_Survives_Flag
				}
			}
			kill_ideology_leader = social_egalitarianism
			create_country_leader = {
				name = "Owen Brown"
				desc = "POLITICS_OWEN_BROWN_DESC"
				picture = "Portrait_Owen_Brown.dds"
				ideology = liberal_social
				traits = {
				}
			}
		}
	}
	else = {
		load_focus_tree = NA_B_vic_generic_ft
	}
}
TEX_civil_war_acw_setup = {
	news_event = { id = usa_news.20 hours = 1 }
	TEX = {
		transfer_state = 375
		transfer_state = 1306
		transfer_state = 1304
		inherit_technology = USA
		set_party_name = {
        	ideology = centrism
        	long_name = TEX_CIVWAR_party_unionists_long
        	name = TEX_CIVWAR_party_unionists
        }
        set_party_name = {
        	ideology = traditional_conservatism
        	long_name = TEX_CIVWAR_party_confederates_long
        	name = TEX_CIVWAR_party_confederates
        }
        set_party_name = {
        	ideology = radical_democracy
        	long_name = TEX_CIVWAR_party_dixiecrats_long
        	name = TEX_CIVWAR_party_dixiecrats
        }
		create_corps_commander = {
			name = "Sam Houston"
			picture = "Portrait_TEX_Sam_Houston.dds"
			traits = { old_guard }
			skill = 4
			id = 18361
			attack_skill = 3
			defense_skill = 4
			planning_skill = 3
			logistics_skill = 2
		}
		start_civil_war = {
			ruling_party = centrism
			ideology = traditional_conservatism
			capital = 1306
			states = {
				 1306
			}
		}
		load_oob = "TEX_Houston_Civil_War_USA"
		set_cosmetic_tag = TEX_CIVWAR_USA_cosmetic
		add_manpower = 2500
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1000
			producer = USA
		}
		add_ideas = {
			houston_revolt
			TEX_CIVWAR_unprepared_militia_3
			TEX_CIVWAR_economic_collapse_2
		}
		set_global_flag = TEX_Civil_War_USA_CSA
		load_focus_tree = TEX_CIVWAR_focus_tree
	}
	random_country = {
		limit = {
			original_tag = TEX
			has_government = traditional_conservatism
		}
		save_global_event_target_as = TEX_CIVWAR_CSA_target
		load_oob = "TEX_Houston_Civil_War_CSA"
		set_stability = 0.25
		set_war_support = 0.8
		set_cosmetic_tag = TEX_CIVWAR_CSA_cosmetic
		add_timed_idea = {
			idea = unprepared_defense_TX
			days = 70
        }
        add_popularity = {
        	ideology = radical_democracy
        	popularity = 0.22
        }
        add_popularity = {
        	ideology = centrism
        	popularity = 0.06
        }
        load_focus_tree = TEX_CIVWAR_focus_tree
        add_ideas = {
			hos_is_leader
			victorian_era
			law_victorian_army
			agrarian
			non_monarchical_system
			presidential_republic

			civilian_economy
			export_focus
			two_percent
			normal_taxes
			cl_legal
			unlimited_work_day

			stagnation_growth
			border_control
			volunteer_only
			usa_slavery_law
			universal_male_suffrage

			constitution_adopted
			free_elections

			privileged_education
			secular_state
			religion_protestant

			hc_no_healthcare
			law_police_force
			inframain_no_subsidies_infrastructure
			navinfra_no_naval_infrastructure
			sfund_private_ventures_only

			TEX_CIVWAR_unprepared_militia_3
			TEX_CIVWAR_economic_collapse_2
        }
        set_state_controller = 375
        add_to_array = { national_culture_array = global.texan }
		add_to_array = { national_religion_array = global.protestant }
	}
	TEX = {
		set_province_controller = 5022
	}
	USA = {
	    every_unit_leader = {
			limit = {
				OR = {
					has_id = 5025
					has_id = 5026
				}
			}
			set_nationality = event_target:TEX_CIVWAR_CSA_target
		}
	}
}
phl_power_struggle_check_popularities = {
    if = { # Anarchism Majority
        limit = {
            AND = {
                anarchism > vanguard_communism
                anarchism > collectivist_socialism
                anarchism > social_egalitarianism
                anarchism > 0.50
            }
        }
        set_country_flag = phl_ps_anarchist_majority
    }
    else_if = { # Anarchism Plurality
        limit = {
            AND = {
                anarchism > vanguard_communism
                anarchism > collectivist_socialism
                anarchism > social_egalitarianism
            }
        }
        set_country_flag = phl_ps_anarchist_plurality
    }
    else_if = { # Socialism Majority
        limit = {
            AND = {
                collectivist_socialism > vanguard_communism
                collectivist_socialism > anarchism
                collectivist_socialism > social_egalitarianism
                collectivist_socialism > 0.50
            }
        }
        set_country_flag = phl_ps_socialist_majority
    }
    else_if = { # Socialism Plurality
        limit = {
            AND = {
                collectivist_socialism > vanguard_communism
                collectivist_socialism > anarchism
                collectivist_socialism > social_egalitarianism
            }
        }
        set_country_flag = phl_ps_socialist_plurality
    }
    else_if = { # Marxism Majority
        limit = {
            AND = {
                vanguard_communism > collectivist_socialism
                vanguard_communism > anarchism
                vanguard_communism > social_egalitarianism
                vanguard_communism > 0.50
            }
        }
        set_country_flag = phl_ps_marxist_majority
    }
    else_if = { # Marxism Plurality
        limit = {
            AND = {
                vanguard_communism > collectivist_socialism
                vanguard_communism > anarchism
                vanguard_communism > social_egalitarianism
            }
        }
        set_country_flag = phl_ps_marxist_plurality
    }
    else = {
        set_country_flag = phl_ps_tied
    }
}
########################
#State Militia Garrison#
########################
USA_call_state_militia_units = {
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 2
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 3 }
		add_to_temp_variable = { State_militia_army_num = 3000 }
	}
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 1
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 3
					compare = not_equals
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 2 }
		add_to_temp_variable = { State_militia_army_num = 2000 }
	}
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 0
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 3
					compare = not_equals
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 2
					compare = not_equals
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 1 }
		add_to_temp_variable = { State_militia_army_num = 1000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 5000 }
			THIS = { state_population < 15000 }
		}
		add_to_temp_variable = { State_militia_army_num = 1000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 15000 }
			THIS = { state_population < 25000 }
		}
		add_to_temp_variable = { State_militia_army_num = 2000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 25000 }
			THIS = { state_population < 35000 }
		}
		add_to_temp_variable = { State_militia_army_num = 3000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 35000 }
			THIS = { state_population < 45000 }
		}
		add_to_temp_variable = { State_militia_army_num = 4000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 45000 }
			THIS = { state_population < 55000 }
		}
		add_to_temp_variable = { State_militia_army_num = 5000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 55000 }
		}
		add_to_temp_variable = { State_militia_army_num = 6000 }
	}
	if = {
		limit = {
			check_variable = {
				var = State_militia_army_num
				value = 6000
				compare = greater_than
			}
		}
		set_temp_variable = { State_militia_army_num = 6000 }
	}
	subtract_from_temp_variable = { State_militia_army_num = State_militia_army_used }
	if = {
		limit = { 
			check_variable = {
				var = State_militia_army_num
				value = 0
				compare = greater_than
			}
		}
		set_temp_variable = {temp_state_militia_army = State_militia_army_num}
		divide_temp_variable = {temp_state_militia_army = 1000}
		round_variable = temp_state_militia_army
		add_to_temp_array = {
			array = num_of_state_militia_divisions_to_raise
			value = 1
			index = 1
		}
		resize_temp_array = {num_of_state_militia_divisions_to_raise = temp_state_militia_army}
		FROM = {
			if = {
				limit = { FROM = { NOT = { has_template = "State Militia" } } }
				division_template = {
					name = "State Militia"
					priority = 0
					division_names_group = USA_STATE_MILITIA_01
					regiments = {
						irregular_infantry = { x = 0 y = 0 }
					}
					is_locked = yes
				}
			}
		}
		for_each_loop = {
			array = num_of_state_militia_divisions_to_raise
			THIS ={
				create_unit = {
					division = "name = \"State Militia\" division_template = \"State Militia\" start_experience_factor = 0.15 start_equipment_factor = 1" 
					owner = FROM
				}
			}
			subtract_from_temp_variable = { State_militia_army_num = 1000 }
			clamp_variable = {
				var = State_militia_army_num
				min = 0
				max = 6000
			}
			add_to_variable = { State_militia_army_used = 1000 }
			clamp_variable = {
				var = State_militia_army_used
				min = 0
				max = 6000
			}
		}
	}
}

USA_dismiss_state_militia_units = {
	delete_unit_template_and_units = { division_template = "State Militia" }
	every_owned_state = {
		limit = {
			check_variable = {
				var = State_militia_army_used
				value = 0
				compare = greater_than
			}
		}
		set_variable = { State_militia_army_used = 0 }
    }
}
###########################
#Colonial Militia Garrison#
###########################
afr_call_colonial_militia_units = {
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 2
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 3 }
		add_to_temp_variable = { State_militia_army_num = 3000 }
	}
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 1
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 3
					compare = not_equals
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 2 }
		add_to_temp_variable = { State_militia_army_num = 2000 }
	}
	if = {
		limit = { 
			THIS = {
				any_province_building_level = {
					province = {
						all_provinces = yes
					}
					building = bunker
					level > 0
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 3
					compare = not_equals
				}
				check_variable = {
					var = Temp_State_bunker_level
					value = 2
					compare = not_equals
				}
			}
		}
		set_temp_variable = { Temp_State_bunker_level = 1 }
		add_to_temp_variable = { State_militia_army_num = 1000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 5000 }
			THIS = { state_population < 15000 }
		}
		add_to_temp_variable = { State_militia_army_num = 1000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 15000 }
			THIS = { state_population < 25000 }
		}
		add_to_temp_variable = { State_militia_army_num = 2000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 25000 }
			THIS = { state_population < 35000 }
		}
		add_to_temp_variable = { State_militia_army_num = 3000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 35000 }
			THIS = { state_population < 45000 }
		}
		add_to_temp_variable = { State_militia_army_num = 4000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 45000 }
			THIS = { state_population < 55000 }
		}
		add_to_temp_variable = { State_militia_army_num = 5000 }
	}
	if = {
		limit = {
			THIS = { is_core_of = FROM }
			THIS = { state_population > 55000 }
		}
		add_to_temp_variable = { State_militia_army_num = 6000 }
	}
	if = {
		limit = {
			check_variable = {
				var = State_militia_army_num
				value = 6000
				compare = greater_than
			}
		}
		set_temp_variable = { State_militia_army_num = 6000 }
	}
	subtract_from_temp_variable = { State_militia_army_num = State_militia_army_used }
	if = {
		limit = { 
			check_variable = {
				var = State_militia_army_num
				value = 0
				compare = greater_than
			}
		}
		set_temp_variable = { temp_state_militia_army = State_militia_army_num }
		divide_temp_variable = { temp_state_militia_army = 1000 }
		round_variable = temp_state_militia_army
		add_to_temp_array = {
			array = num_of_state_militia_divisions_to_raise
			value = 1
			index = 1
		}
		resize_temp_array = { num_of_state_militia_divisions_to_raise = temp_state_militia_army }
		FROM = {
			if = {
				limit = { 
					FROM = { 
						NOT = { has_template = "Colonial Militia" } 
						OR = {
							has_idea = AFR_netherland_colony
							has_idea = AFR_netherland_colony_tribute
						}
					} 
				}
				division_template = {
					name = "Colonial Militia"
					priority = 1
					division_names_group = AFR_COLONIAL_MILITIA_01
					regiments = {
						colonial_militia_infantry = { x = 0 y = 0 }
					}
					is_locked = yes
				}
			}
			else_if = {
				limit = { 
					FROM = { 
						NOT = { has_template = "Colonial Militia" } 
					} 
				}
				division_template = {
					name = "Colonial Militia"
					priority = 0
					division_names_group = AFR_COLONIAL_MILITIA_01
					regiments = {
						colonial_militia_infantry = { x = 0 y = 0 }
					}
					is_locked = yes
				}
			}
		}
		for_each_loop = {
			array = num_of_state_militia_divisions_to_raise
			THIS ={
				if = {
					limit = {
						FROM = {
							OR = {
								has_idea = AFR_netherland_colony
								has_idea = AFR_netherland_colony_tribute
							}
						} 
					}
					create_unit = {
						division = "name = \"Colonial Militia\" division_template = \"Colonial Militia\" start_experience_factor = 0.35 start_equipment_factor = 1" 
						owner = FROM
					}
				}
				else = {
					create_unit = {
						division = "name = \"Colonial Militia\" division_template = \"Colonial Militia\" start_experience_factor = 0.15 start_equipment_factor = 1" 
						owner = FROM
					}
				}
			}
			subtract_from_temp_variable = { State_militia_army_num = 1000 }
			clamp_variable = {
				var = State_militia_army_num
				min = 0
				max = 6000
			}
			add_to_variable = { State_militia_army_used = 1000 }
			clamp_variable = {
				var = State_militia_army_used
				min = 0
				max = 6000
			}
		}
	}
}

AFR_dismiss_colonial_militia_units = {
	delete_unit_template_and_units = { division_template = "Colonial Militia" }
	every_owned_state = {
		limit = {
			check_variable = {
				var = State_militia_army_used
				value = 0
				compare = greater_than
			}
		}
		set_variable = { State_militia_army_used = 0 }
    }
}
##############################
#Dynamic Border War Mechanics#
##############################
set_dynamic_american_state_border_war_variables = {

	hidden_effect = {
		FROM = {
			random_owned_controlled_state = {
				limit = {
					if = {
						limit = { 
							check_variable = { var = ROOT.afr_has_unsanctioned_raid_against_colonial_neighbor@PREV value = 1 compare = greater_than_or_equals }
							ROOT = { has_country_flag = afr_unsanctioned_raid_on_1029 }
							PREV = { owns_state = 1029 }
							1029 = { any_neighbor_state = { is_fully_controlled_by = ROOT } }
						}
						STATE = 1029
					}
					else = {
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						any_neighbor_state = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							#has_ROOT_at_least_1_div_in_current_state_scope = yes
							is_fully_controlled_by = ROOT
						}
					}
				}
				save_event_target_as = defender_state
				set_variable = { PREV.defender_state_vs_@ROOT = id }
				set_temp_variable = { defender_state_temp = id }
				set_dynamic_american_state_province_variable_for_defender = yes
				if = {
					limit = { 
						ROOT = { 
							NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
							NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
							NOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
							NOT = { has_country_flag = set_border_war_data_former_usa_state_neighbor_flag }
						}
					}
					set_state_flag = border_incident_active
					add_claim_by = ROOT
				}
				if = {
					limit = {
						ROOT = {
							has_country_flag = set_border_war_data_first_nations_tribal_border_war_enemy_flag
						}
					}
					#add_claim_by = ROOT
					set_variable = { first_nations_acw_border_claim@ROOT = 1 }
				}
			}
		}
		random_state = {
			limit = {
				is_fully_controlled_by = ROOT
				hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
				#has_ROOT_at_least_1_div_in_current_state_scope = yes
				any_neighbor_state = {
					state = var:FROM.defender_state_vs_@ROOT
				}
			}
			save_event_target_as = attacker_state
			set_variable = { FROM.attacker_state_vs_@ROOT = id }
			set_temp_variable = { attacker_state_temp = id }
			set_dynamic_american_state_province_variable_for_attacker = yes
			if = {
				limit = { 
					ROOT = { 
						NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
						NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
						NOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
						NOT = { has_country_flag = set_border_war_data_former_usa_state_neighbor_flag }
					}
				}
				set_state_flag = border_incident_active
			}
		}
	}
}

set_dynamic_american_state_province_variable_for_attacker = {
	FROM = { set_variable = { FROM.attacker_state_province_@ROOT = 1 } }
}

set_dynamic_american_state_province_variable_for_defender = {
	FROM = { set_variable = { FROM.defender_state_province_@ROOT = 1 } }
}




start_dynamic_american_state_border_war = {
	
	start_border_war = {
		change_state_after_war = no
		attacker = {
			state = var:FROM.attacker_state_vs_@ROOT
			num_provinces = 1
			on_win = usa_state_event_on_win_attacker.1
			on_lose = usa_state_event_on_lose_attacker.1
			on_cancel = usa_state_event_on_cancel_attacker.1
		}
		
		defender = {
			state = var:FROM.defender_state_vs_@ROOT
			num_provinces = 1
			on_win = usa_state_event_on_win_defender.1
			on_lose = usa_state_event_on_lose_defender.1
			on_cancel = usa_state_event_on_cancel_defender.1
		}
	}
	hidden_effect = {
		if = {
			limit = { 
				ROOT = { 
					NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
					NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
					NOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
					NOT = { has_country_flag = balkanized_state_border_skirmish_neighbor_flag }
				}
			}
			var:FROM.defender_state_vs_@ROOT = {
				clr_state_flag = border_incident_active
				if = {
					limit = { OWNER = { has_country_flag = ETH_caliphate_raid } }
					set_state_flag = ETH_caliphate_raid
				}
			}
			var:FROM.attacker_state_vs_@ROOT = {
				clr_state_flag = border_incident_active
			}
		}
		if = {
			limit = { 
				ROOT = { owns_state = var:FROM.attacker_state_vs_@ROOT } #Attacker
				FROM = { owns_state = var:FROM.defender_state_vs_@ROOT } #Defender
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 10
				}
			}
			######################################
			###Native American vs North America###
			######################################
			else_if = {
				limit = {
					FROM = { has_country_flag = first_nations_tribal_raid_spotted_flag }
					ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
				}
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					defender_modifier = 0.10
					combat_width = 20
				}
			}
			else_if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					attacker_modifier = 0.10
					combat_width = 20
				}
			}
			###
			###
			###
			else_if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					attacker_modifier = 0.10
					combat_width = 20
					
				}
			}
			else_if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_border_war_enemy_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_border_war_enemy_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 20
				}
			}
			else_if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_former_usa_state_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_former_usa_state_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 40
				}
			}
		}
		clear_variable = FROM.defender_state_vs_@ROOT
		clear_variable = FROM.defender_state_province_@ROOT
		clear_variable = FROM.attacker_state_vs_@ROOT
		clear_variable = FROM.attacker_state_province_@ROOT
	}
}

start_dynamic_american_state_border_war_USA = {
	
	start_border_war = {
		change_state_after_war = no
		attacker = {
			state = var:FROM.attacker_state_vs_@ROOT
			num_provinces = 1
			on_win = USA_FN_encroachment_event.5 #US attacks and wins
			on_lose = USA_FN_encroachment_event.6 #US attacks and loses
			on_cancel = USA_FN_encroachment_event.7 #US attacks but then goes "nah"
		}
		
		defender = {
			state = var:FROM.defender_state_vs_@ROOT
			num_provinces = 1
			on_win = USA_FN_encroachment_event.8 #FN defends and wins
			on_lose = USA_FN_encroachment_event.9 #FN defends but loses, F
			on_cancel = USA_FN_encroachment_event.10 #FN defends but then gets confused when the white-man fucks off home
		}
	}
	hidden_effect = {
		if = {
			limit = { 
				ROOT = { 
					NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
					NOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
					NOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
					NOT = { has_country_flag = balkanized_state_border_skirmish_neighbor_flag }
				}
			}
			var:FROM.defender_state_vs_@ROOT = {
				clr_state_flag = border_incident_active
				if = {
					limit = { OWNER = { has_country_flag = ETH_caliphate_raid } }
					set_state_flag = ETH_caliphate_raid
				}
			}
			var:FROM.attacker_state_vs_@ROOT = {
				clr_state_flag = border_incident_active
			}
		}
		if = {
			limit = { 
				ROOT = { owns_state = var:FROM.attacker_state_vs_@ROOT } #Attacker
				FROM = { owns_state = var:FROM.defender_state_vs_@ROOT } #Defender
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_raid_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 10
				}
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_raid_colonial_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					attacker_modifier = 0.10
					combat_width = 20
				}
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_afr_tribal_raid_colonial_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					attacker_modifier = 0.10
					combat_width = 20
					
				}
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_first_nations_tribal_border_war_enemy_flag } }
				ROOT = { clr_country_flag = set_border_war_data_first_nations_tribal_border_war_enemy_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 20
				}
			}
			if = {
				limit = { ROOT = { has_country_flag = set_border_war_data_former_usa_state_neighbor_flag } }
				ROOT = { clr_country_flag = set_border_war_data_former_usa_state_neighbor_flag }
				set_border_war_data = {
					attacker = var:FROM.attacker_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					combat_width = 40
				}
			}
		}
		clear_variable = FROM.defender_state_vs_@ROOT
		clear_variable = FROM.defender_state_province_@ROOT
		clear_variable = FROM.attacker_state_vs_@ROOT
		clear_variable = FROM.attacker_state_province_@ROOT
	}
}