scripted_gui = {
	state_view_economy = {
		window_name = "state_view_economy_container"
		parent_window_token = selected_state_view

		context_type = selected_state_context

		visible = {
			always = yes
		}
		effects = {
			state_view_economy_button_click = {
				if = {
					limit = {
						NOT = {
							ROOT = {
								has_country_flag = state_economy_view_open
							}
						}
					}
					ROOT = {
						set_country_flag = state_economy_view_open
					}
				}
				else = {
					ROOT = {
						clr_country_flag = state_economy_view_open
						clr_country_flag = pm_view_open
					}
				}
			}
		}
		properties = {
			pops_life_needs_fulfilled_strip = {
				frame = pops_life_needs_fulfilled_frame
			}
			pops_everyday_needs_fulfilled_strip = {
				frame = pops_everyday_needs_fulfilled_frame
			}
			pops_luxury_needs_fulfilled_strip = {
				frame = pops_luxury_needs_fulfilled_frame
			}

			#Pie Segments
				pie0 = { image = "[?pie_chart_pop_type^0.GetValueToPopType]" }
				pie1 = { image = "[?pie_chart_pop_type^1.GetValueToPopType]" }
				pie2 = { image = "[?pie_chart_pop_type^2.GetValueToPopType]" }
				pie3 = { image = "[?pie_chart_pop_type^3.GetValueToPopType]" }
				pie4 = { image = "[?pie_chart_pop_type^4.GetValueToPopType]" }
				pie5 = { image = "[?pie_chart_pop_type^5.GetValueToPopType]" }
				pie6 = { image = "[?pie_chart_pop_type^6.GetValueToPopType]" }
				pie7 = { image = "[?pie_chart_pop_type^7.GetValueToPopType]" }
				pie8 = { image = "[?pie_chart_pop_type^8.GetValueToPopType]" }
				pie9 = { image = "[?pie_chart_pop_type^9.GetValueToPopType]" }
				pie10 = { image = "[?pie_chart_pop_type^10.GetValueToPopType]" }
				pie11 = { image = "[?pie_chart_pop_type^11.GetValueToPopType]" }
				pie12 = { image = "[?pie_chart_pop_type^12.GetValueToPopType]" }
				pie13 = { image = "[?pie_chart_pop_type^13.GetValueToPopType]" }
				pie14 = { image = "[?pie_chart_pop_type^14.GetValueToPopType]" }
				pie15 = { image = "[?pie_chart_pop_type^15.GetValueToPopType]" }
				pie16 = { image = "[?pie_chart_pop_type^16.GetValueToPopType]" }
				pie17 = { image = "[?pie_chart_pop_type^17.GetValueToPopType]" }
				pie18 = { image = "[?pie_chart_pop_type^18.GetValueToPopType]" }
				pie19 = { image = "[?pie_chart_pop_type^19.GetValueToPopType]" }
				pie20 = { image = "[?pie_chart_pop_type^20.GetValueToPopType]" }
				pie21 = { image = "[?pie_chart_pop_type^21.GetValueToPopType]" }
				pie22 = { image = "[?pie_chart_pop_type^22.GetValueToPopType]" }
				pie23 = { image = "[?pie_chart_pop_type^23.GetValueToPopType]" }
				pie24 = { image = "[?pie_chart_pop_type^24.GetValueToPopType]" }
				pie25 = { image = "[?pie_chart_pop_type^25.GetValueToPopType]" }
				pie26 = { image = "[?pie_chart_pop_type^26.GetValueToPopType]" }
				pie27 = { image = "[?pie_chart_pop_type^27.GetValueToPopType]" }
				pie28 = { image = "[?pie_chart_pop_type^28.GetValueToPopType]" }
				pie29 = { image = "[?pie_chart_pop_type^29.GetValueToPopType]" }
				pie30 = { image = "[?pie_chart_pop_type^30.GetValueToPopType]" }
				pie31 = { image = "[?pie_chart_pop_type^31.GetValueToPopType]" }
				pie32 = { image = "[?pie_chart_pop_type^32.GetValueToPopType]" }
				pie33 = { image = "[?pie_chart_pop_type^33.GetValueToPopType]" }
				pie34 = { image = "[?pie_chart_pop_type^34.GetValueToPopType]" }
				pie35 = { image = "[?pie_chart_pop_type^35.GetValueToPopType]" }
				pie36 = { image = "[?pie_chart_pop_type^36.GetValueToPopType]" }
				pie37 = { image = "[?pie_chart_pop_type^37.GetValueToPopType]" }
				pie38 = { image = "[?pie_chart_pop_type^38.GetValueToPopType]" }
				pie39 = { image = "[?pie_chart_pop_type^39.GetValueToPopType]" }
				pie40 = { image = "[?pie_chart_pop_type^40.GetValueToPopType]" }
				pie41 = { image = "[?pie_chart_pop_type^41.GetValueToPopType]" }
				pie42 = { image = "[?pie_chart_pop_type^42.GetValueToPopType]" }
				pie43 = { image = "[?pie_chart_pop_type^43.GetValueToPopType]" }
				pie44 = { image = "[?pie_chart_pop_type^44.GetValueToPopType]" }
				pie45 = { image = "[?pie_chart_pop_type^45.GetValueToPopType]" }
				pie46 = { image = "[?pie_chart_pop_type^46.GetValueToPopType]" }
				pie47 = { image = "[?pie_chart_pop_type^47.GetValueToPopType]" }
				pie48 = { image = "[?pie_chart_pop_type^48.GetValueToPopType]" }
				pie49 = { image = "[?pie_chart_pop_type^49.GetValueToPopType]" }
				pie50 = { image = "[?pie_chart_pop_type^50.GetValueToPopType]" }
				pie51 = { image = "[?pie_chart_pop_type^51.GetValueToPopType]" }
				pie52 = { image = "[?pie_chart_pop_type^52.GetValueToPopType]" }
				pie53 = { image = "[?pie_chart_pop_type^53.GetValueToPopType]" }
				pie54 = { image = "[?pie_chart_pop_type^54.GetValueToPopType]" }
				pie55 = { image = "[?pie_chart_pop_type^55.GetValueToPopType]" }
				pie56 = { image = "[?pie_chart_pop_type^56.GetValueToPopType]" }
				pie57 = { image = "[?pie_chart_pop_type^57.GetValueToPopType]" }
				pie58 = { image = "[?pie_chart_pop_type^58.GetValueToPopType]" }
				pie59 = { image = "[?pie_chart_pop_type^59.GetValueToPopType]" }
				pie60 = { image = "[?pie_chart_pop_type^60.GetValueToPopType]" }
				pie61 = { image = "[?pie_chart_pop_type^61.GetValueToPopType]" }
				pie62 = { image = "[?pie_chart_pop_type^62.GetValueToPopType]" }
				pie63 = { image = "[?pie_chart_pop_type^63.GetValueToPopType]" }
				pie64 = { image = "[?pie_chart_pop_type^64.GetValueToPopType]" }
				pie65 = { image = "[?pie_chart_pop_type^65.GetValueToPopType]" }
				pie66 = { image = "[?pie_chart_pop_type^66.GetValueToPopType]" }
				pie67 = { image = "[?pie_chart_pop_type^67.GetValueToPopType]" }
				pie68 = { image = "[?pie_chart_pop_type^68.GetValueToPopType]" }
				pie69 = { image = "[?pie_chart_pop_type^69.GetValueToPopType]" }
				pie70 = { image = "[?pie_chart_pop_type^70.GetValueToPopType]" }
				pie71 = { image = "[?pie_chart_pop_type^71.GetValueToPopType]" }
				pie72 = { image = "[?pie_chart_pop_type^72.GetValueToPopType]" }
				pie73 = { image = "[?pie_chart_pop_type^73.GetValueToPopType]" }
				pie74 = { image = "[?pie_chart_pop_type^74.GetValueToPopType]" }
				pie75 = { image = "[?pie_chart_pop_type^75.GetValueToPopType]" }
				pie76 = { image = "[?pie_chart_pop_type^76.GetValueToPopType]" }
				pie77 = { image = "[?pie_chart_pop_type^77.GetValueToPopType]" }
				pie78 = { image = "[?pie_chart_pop_type^78.GetValueToPopType]" }
				pie79 = { image = "[?pie_chart_pop_type^79.GetValueToPopType]" }
				pie80 = { image = "[?pie_chart_pop_type^80.GetValueToPopType]" }
				pie81 = { image = "[?pie_chart_pop_type^81.GetValueToPopType]" }
				pie82 = { image = "[?pie_chart_pop_type^82.GetValueToPopType]" }
				pie83 = { image = "[?pie_chart_pop_type^83.GetValueToPopType]" }
				pie84 = { image = "[?pie_chart_pop_type^84.GetValueToPopType]" }
				pie85 = { image = "[?pie_chart_pop_type^85.GetValueToPopType]" }
				pie86 = { image = "[?pie_chart_pop_type^86.GetValueToPopType]" }
				pie87 = { image = "[?pie_chart_pop_type^87.GetValueToPopType]" }
				pie88 = { image = "[?pie_chart_pop_type^88.GetValueToPopType]" }
				pie89 = { image = "[?pie_chart_pop_type^89.GetValueToPopType]" }
				pie90 = { image = "[?pie_chart_pop_type^90.GetValueToPopType]" }
				pie91 = { image = "[?pie_chart_pop_type^91.GetValueToPopType]" }
				pie92 = { image = "[?pie_chart_pop_type^92.GetValueToPopType]" }
				pie93 = { image = "[?pie_chart_pop_type^93.GetValueToPopType]" }
				pie94 = { image = "[?pie_chart_pop_type^94.GetValueToPopType]" }
				pie95 = { image = "[?pie_chart_pop_type^95.GetValueToPopType]" }
				pie96 = { image = "[?pie_chart_pop_type^96.GetValueToPopType]" }
				pie97 = { image = "[?pie_chart_pop_type^97.GetValueToPopType]" }
				pie98 = { image = "[?pie_chart_pop_type^98.GetValueToPopType]" }
				pie99 = { image = "[?pie_chart_pop_type^99.GetValueToPopType]" }
			#
		}
		triggers = {
			state_view_economy_button_click_enabled = {
				always = yes
			}
		}

	}
	construction_economy = {
		window_name = "construction_economy_container"
		parent_window_token = construction_tab

		context_type = player_context

		visible = {
			always = yes
		}
		effects = {
			construction_economy_button_click = {
				if = {
					limit = {
						NOT = {
							ROOT = {
								has_country_flag = state_economy_view_open
							}
						}
					}
					ROOT = {
						set_country_flag = state_economy_view_open
					}
				}
				else = {
					ROOT = {
						clr_country_flag = state_economy_view_open
						clr_country_flag = pm_view_open
					}
				}
			}
		}
		triggers = {
			construction_economy_button_click_enabled = {
				always = yes
			}
		}

	}
	state_economy_window = {
		window_name = "state_economy_window_container"
		dirty = update_state_econ_window

		context_type = selected_state_context

		visible = {
			ROOT = {
				has_country_flag = state_economy_view_open
			}
		}

		triggers = {
			time_button_visible = {
				is_debug = yes
			}
			time_button_title_visible = {
				is_debug = yes
			}
			reset_button_visible = {
				is_debug = yes
			}
			reset_button_title_visible = {
				is_debug = yes
			}
			extra_button_visible = {
				is_debug = yes
			}
			extra_button_title_visible = {
				is_debug = yes
			}
			autobuild_button_visible = {
				is_debug = yes
			}
			autobuild_button_title_visible = {
				is_debug = yes
			}

			building_increase_size_button_click_enabled = {
				set_temp_variable = { industry_token = var:v }
				can_build_industry = yes
				is_fully_controlled_by = ROOT

				OR = {
					check_variable = { construction_financier@var:industry_token = ROOT }
					check_variable = { construction@var:industry_token = 0 }
				}

				# Has enough starting capital
					if = { limit = { has_variable = production_method@var:industry_token } set_temp_variable = { pm_temp = production_method@var:industry_token } }
					else = { set_temp_variable = { pm_temp = controller:latest_production_method@var:v } }
					if = { limit = { has_variable = automation_method@var:industry_token } set_temp_variable = { am_temp = automation_method@var:industry_token } }
					else = { set_temp_variable = { am_temp = controller:latest_automation_method@var:v } }
					get_construction_cost = yes

					multiply_temp_variable = { total_construction_cost_temp = global.start_construction_cost_multiplier }
					divide_temp_variable = { total_construction_cost_temp = ROOT.modifier@government_investment_efficiency_factor }
					NOT = { check_variable = { total_construction_cost_temp > ROOT.treasury } }
				#
			}
			building_decrease_size_button_click_enabled = {
				check_variable = { construction@var:v > 0  }
				is_fully_controlled_by = ROOT
			}

			rgo_production_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@var:v = 0 } } }
					is_in_array = { global.building_production_methods@var:v = retooling_pm@var:v }
				}
				else = {
					always = no
				}
			}
			rgo_automation_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@var:v = 0 } } }
					is_in_array = { global.building_automation_methods@var:v = retooling_pm@var:v }
				}
				else = {
					always = no
				}
			}

			building_construction_icon_visible = {
				NOT = { check_variable = { construction@var:v = 0 } }
			}
			building_production_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@var:v = 0 } } }
					is_in_array = { global.building_production_methods@var:v = retooling_pm@var:v }
				}
				else = {
					always = no
				}
			}
			building_automation_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@var:v = 0 } } }
					is_in_array = { global.building_automation_methods@var:v = retooling_pm@var:v }
				}
				else = {
					always = no
				}
			}

			infrastructure_production_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@token:infrastructure = 0 } } }
					is_in_array = { global.building_production_methods@token:infrastructure = retooling_pm@token:infrastructure }
				}
				else = {
					always = no
				}
			}

			railway_increase_size_button_click_enabled = {
				set_temp_variable = { industry_token = token:railway }
				can_build_industry = yes
				is_fully_controlled_by = ROOT

				OR = {
					check_variable = { construction_financier@var:industry_token = ROOT }
					check_variable = { construction@var:industry_token = 0 }
				}

				# Has enough starting capital
					if = { limit = { has_variable = production_method@token:railway } set_temp_variable = { pm_temp = production_method@token:railway } }
					else = { set_temp_variable = { pm_temp = controller:latest_production_method@var:v } }
					if = { limit = { has_variable = automation_method@token:railway } set_temp_variable = { am_temp = automation_method@token:railway } }
					else = { set_temp_variable = { am_temp = controller:latest_automation_method@var:v } }
					get_construction_cost = yes

					multiply_temp_variable = { total_construction_cost_temp = global.start_construction_cost_multiplier }
					divide_temp_variable = { total_construction_cost_temp = ROOT.modifier@government_investment_efficiency_factor }
					NOT = { check_variable = { total_construction_cost_temp > ROOT.treasury } }
				#
			}
			railway_decrease_size_button_click_enabled = {
				check_variable = { construction@token:railway > 0  }
				is_fully_controlled_by = ROOT
			}
			railway_construction_icon_visible = {
				NOT = { check_variable = { construction@token:railway = 0 } }
			}
			railway_production_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@token:railway = 0 } } }
					is_in_array = { global.building_production_methods@token:railway = retooling_pm@token:railway }
				}
				else = {
					always = no
				}
			}
			railway_automation_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@token:railway = 0 } } }
					is_in_array = { global.building_automation_methods@token:railway = retooling_pm@token:railway }
				}
				else = {
					always = no
				}
			}

			port_increase_size_button_click_enabled = {
				set_temp_variable = { industry_token = token:port }
				can_build_industry = yes
				is_coastal = yes
				is_fully_controlled_by = ROOT

				OR = {
					check_variable = { construction_financier@var:industry_token = ROOT }
					check_variable = { construction@var:industry_token = 0 }
				}

				# Has enough starting capital
					if = { limit = { has_variable = production_method@token:port } set_temp_variable = { pm_temp = production_method@token:port } }
					else = { set_temp_variable = { pm_temp = controller:latest_production_method@var:v } }
					if = { limit = { has_variable = automation_method@token:port } set_temp_variable = { am_temp = automation_method@token:port } }
					else = { set_temp_variable = { am_temp = controller:latest_automation_method@var:v } }
					get_construction_cost = yes

					multiply_temp_variable = { total_construction_cost_temp = global.start_construction_cost_multiplier }
					divide_temp_variable = { total_construction_cost_temp = ROOT.modifier@government_investment_efficiency_factor }
					NOT = { check_variable = { total_construction_cost_temp > ROOT.treasury } }
				#
			}
			port_decrease_size_button_click_enabled = {
				check_variable = { construction@token:port > 0  }
				is_fully_controlled_by = ROOT
			}
			port_construction_icon_visible = {
				NOT = { check_variable = { construction@token:port = 0 } }
			}
			port_production_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@token:port = 0 } } }
					is_in_array = { global.building_production_methods@token:port = retooling_pm@token:port }
				}
				else = {
					always = no
				}
			}
			port_automation_method_retooling_icon_visible = {
				if = { limit = { NOT = { check_variable = { retooling_pm@token:port = 0 } } }
					is_in_array = { global.building_automation_methods@token:port = retooling_pm@token:port }
				}
				else = {
					always = no
				}
			}

			industrial_complex_construction_icon_visible = {
				NOT = { check_variable = { construction@token:industrial_complex = 0 } }
			}
			arms_factory_construction_icon_visible = {
				NOT = { check_variable = { construction@token:arms_factory = 0 } }
			}
			dockyard_construction_icon_visible = {
				NOT = { check_variable = { construction@token:dockyard = 0 } }
			}
		}

		effects = {
			close_button_click = {
				ROOT = {
					clr_country_flag = state_economy_view_open
					clr_country_flag = pm_view_open
				}
			}

			build_building_button_click = {
				if = {
					limit = {
						ROOT = { has_country_flag = construction_view_open }
					}
					ROOT = {
						clr_country_flag = construction_view_open
					}
				}
				else = {
					ROOT = {
						set_country_flag = construction_view_open
					}
				}
			}

			building_increase_size_button_click = {
				set_temp_variable = { x_temp = 1 }
				set_temp_variable = { financer_temp = ROOT }
				set_temp_variable = { industry_token = v }
				if = { limit = { has_variable = production_method@var:industry_token } set_temp_variable = { production_method_temp = production_method@var:industry_token } }
				else = { set_temp_variable = { production_method_temp = controller:latest_production_method@var:v } }
				if = { limit = { has_variable = automation_method@var:industry_token } set_temp_variable = { automation_method_temp = automation_method@var:industry_token } }
				else = { set_temp_variable = { automation_method_temp = controller:latest_automation_method@var:v } }
				construct_x_industries = yes

				ROOT = { budget_update = yes }
			}
			building_decrease_size_button_click = {
				subtract_from_variable = { construction@var:v = 1 }
				if = {
					limit = {
						check_variable = { construction@var:v = 0 }
						check_variable = { size@var:v = 0 }
					}
					remove_from_array = { industries = v }
					remove_from_array = { buildings = v }
				}

				ROOT = { budget_update = yes }
				refresh_construction_list = yes
				add_to_variable = { update_state_econ_window = 1 }
			}
			rgo_production_method_button_click = {
				set_temp_variable = { industry_token = v }
				set_temp_variable = { am_select = 0 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = v }
							check_variable = { selected_pm_type = 0 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = v }
						set_variable = { selected_pm_type = 0 }
						refresh_pm_list = yes
					}
				}
			}
			rgo_automation_method_button_click = {
				set_temp_variable = { industry_token = v }
				set_temp_variable = { am_select = 1 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = v }
							check_variable = { selected_pm_type = 1 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = v }
						set_variable = { selected_pm_type = 1 }
						refresh_pm_list = yes
					}
				}
			}
			building_production_method_button_click = {
				set_temp_variable = { industry_token = v }
				set_temp_variable = { am_select = 0 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = v }
							check_variable = { selected_pm_type = 0 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = v }
						set_variable = { selected_pm_type = 0 }
						refresh_pm_list = yes
					}
				}
			}
			building_automation_method_button_click = {
				set_temp_variable = { industry_token = v }
				set_temp_variable = { am_select = 1 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = v }
							check_variable = { selected_pm_type = 1 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = v }
						set_variable = { selected_pm_type = 1 }
						refresh_pm_list = yes
					}
				}
			}

			infrastructure_production_method_button_click = {
				set_temp_variable = { industry_token = token:infrastructure }
				set_temp_variable = { am_select = 0 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = token:infrastructure }
							check_variable = { selected_pm_type = 0 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = token:infrastructure }
						set_variable = { selected_pm_type = 0 }
						refresh_pm_list = yes
					}
				}
			}
			railway_increase_size_button_click = {
				set_temp_variable = { x_temp = 1 }
				set_temp_variable = { financer_temp = ROOT }
				set_temp_variable = { industry_token = token:railway }
				if = { limit = { has_variable = production_method@token:railway } set_temp_variable = { production_method_temp = production_method@token:railway } }
				else = { set_temp_variable = { production_method_temp = controller:latest_production_method@var:v } }
				if = { limit = { has_variable = automation_method@token:railway } set_temp_variable = { automation_method_temp = automation_method@token:railway } }
				else = { set_temp_variable = { automation_method_temp = controller:latest_automation_method@var:v } }
				construct_x_industries = yes

				ROOT = { budget_update = yes }
			}
			railway_decrease_size_button_click = {
				subtract_from_variable = { construction@token:railway = 1 }
				if = {
					limit = {
						check_variable = { construction@token:railway = 0 }
						check_variable = { size@token:railway = 0 }
					}
					remove_from_array = { industries = v }
					remove_from_array = { buildings = v }
				}

				ROOT = { budget_update = yes }
				refresh_construction_list = yes
				add_to_variable = { update_state_econ_window = 1 }
			}
			railway_production_method_button_click = {
				set_temp_variable = { industry_token = token:railway }
				set_temp_variable = { am_select = 0 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = token:railway }
							check_variable = { selected_pm_type = 0 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = token:railway }
						set_variable = { selected_pm_type = 0 }
						refresh_pm_list = yes
					}
				}
			}
			railway_automation_method_button_click = {
				set_temp_variable = { industry_token = token:railway }
				set_temp_variable = { am_select = 1 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = token:railway }
							check_variable = { selected_pm_type = 1 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = token:railway }
						set_variable = { selected_pm_type = 1 }
						refresh_pm_list = yes
					}
				}
			}
			port_increase_size_button_click = {
				set_temp_variable = { x_temp = 1 }
				set_temp_variable = { financer_temp = ROOT }
				set_temp_variable = { industry_token = token:port }
				if = { limit = { has_variable = production_method@token:port } set_temp_variable = { production_method_temp = production_method@token:port } }
				else = { set_temp_variable = { production_method_temp = controller:latest_production_method@var:v } }
				if = { limit = { has_variable = automation_method@token:port } set_temp_variable = { automation_method_temp = automation_method@token:port } }
				else = { set_temp_variable = { automation_method_temp = controller:latest_automation_method@var:v } }
				construct_x_industries = yes

				ROOT = { budget_update = yes }
			}
			port_decrease_size_button_click = {
				subtract_from_variable = { construction@token:port = 1 }
				if = {
					limit = {
						check_variable = { construction@token:port = 0 }
						check_variable = { size@token:port = 0 }
					}
					remove_from_array = { industries = v }
					remove_from_array = { buildings = v }
				}

				ROOT = { budget_update = yes }
				refresh_construction_list = yes
				add_to_variable = { update_state_econ_window = 1 }
			}
			port_production_method_button_click = {
				set_temp_variable = { industry_token = token:port }
				set_temp_variable = { am_select = 0 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = token:port }
							check_variable = { selected_pm_type = 0 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = token:port }
						set_variable = { selected_pm_type = 0 }
						refresh_pm_list = yes
					}
				}
			}
			port_automation_method_button_click = {
				set_temp_variable = { industry_token = token:port }
				set_temp_variable = { am_select = 1 }
				ROOT = {
					if = {
						limit = {
							has_country_flag = pm_view_open
							check_variable = { selected_industry = token:port }
							check_variable = { selected_pm_type = 1 }
						}
						clr_country_flag = pm_view_open
					}
					else = {
						set_country_flag = pm_view_open
						set_variable = { selected_industry = token:port }
						set_variable = { selected_pm_type = 1 }
						refresh_pm_list = yes
					}
				}
			}

			time_button_click = {
				ROOT = { _country_advance_time = yes }
				add_to_variable = { update_state_econ_window = 1 }
			}
			reset_button_click = {
				ROOT = { _country_reset = yes }
				add_to_variable = { update_state_econ_window = 1 }
			}
			extra_button_click = {
				set_temp_variable = { industry_token = token:urban_center }
				set_temp_variable = { financer_temp = ROOT }
				construct_x_industries = yes
			}
			autobuild_button_click = {
				ROOT = {
					if = {
						limit = {
							has_global_flag = autobuild_flag
						}
						clr_global_flag = autobuild_flag
					}
					else = {
						set_global_flag = autobuild_flag
					}
				}
				every_state = {
					refresh_construction_list = yes
				}
				add_to_variable = { update_state_econ_window = 1 }
			}

		}

		dynamic_lists = {
			urban_buildings_list = {
				array = buildings
				entry_container = building_container
			}
			rgos_list = {
				array = rgos
				entry_container = rgo_container
			}
			statistics_gdp_graph = {
				array = gdp_graph_amount_array
				entry_container = state_gdp_point_entry
			}

			statistics_gdp_graph = {
				array = gdp_graph_frames
				entry_container = GDP_graph_segment
				value = segment_value
				index = segment_idx
			}
		}

		properties = {
			line_segment = {
				frame = segment_value
			}

			pops_money_icon = {
				image = "[GetCurrencyIconState]"
			}

			building_icon = {
				image = "[GetIconFromV]"
			}
			building_employment_icon = {
				image = "[GetIndustryEmploymentIcon]"
			}
			building_production_method_icon = {
				image = "[GetIndustryPMIcon]"
			}
			building_automation_method_icon = {
				image = "[GetIndustryAMIcon]"
			}

			rgo_icon = {
				image = "[GetIconFromV]"
			}
			rgo_employment_icon = {
				image = "[GetIndustryEmploymentIcon]"
			}
			rgo_production_method_icon = {
				image = "[GetIndustryPMIcon]"
			}
			rgo_automation_method_icon = {
				image = "[GetIndustryAMIcon]"
			}

			infrastructure_employment_icon = {
				image = "[GetInfrastructureEmploymentIcon]"
			}
			railway_employment_icon = {
				image = "[GetRailwayEmploymentIcon]"
			}
			port_employment_icon = {
				image = "[GetPortEmploymentIcon]"
			}
			industrial_complex_employment_icon = {
				image = "[GetIndustrialComplexEmploymentIcon]"
			}
			arms_factory_employment_icon = {
				image = "[GetArmsFactoryEmploymentIcon]"
			}
			dockyard_employment_icon = {
				image = "[GetDockyardEmploymentIcon]"
			}

			pops_life_needs_fulfilled_strip = {
				frame = pops_life_needs_fulfilled_frame
			}
			pops_everyday_needs_fulfilled_strip = {
				frame = pops_everyday_needs_fulfilled_frame
			}
			pops_luxury_needs_fulfilled_strip = {
				frame = pops_luxury_needs_fulfilled_frame
			}

			gdp_graph_point_icon = {
				y = gdp_graph_y_array^i
				frame = gdp_graph_color_array^i
			}
			#Pie Segments
				pie0 = { image = "[?pie_chart_pop_type^0.GetValueToPopType]" }
				pie1 = { image = "[?pie_chart_pop_type^1.GetValueToPopType]" }
				pie2 = { image = "[?pie_chart_pop_type^2.GetValueToPopType]" }
				pie3 = { image = "[?pie_chart_pop_type^3.GetValueToPopType]" }
				pie4 = { image = "[?pie_chart_pop_type^4.GetValueToPopType]" }
				pie5 = { image = "[?pie_chart_pop_type^5.GetValueToPopType]" }
				pie6 = { image = "[?pie_chart_pop_type^6.GetValueToPopType]" }
				pie7 = { image = "[?pie_chart_pop_type^7.GetValueToPopType]" }
				pie8 = { image = "[?pie_chart_pop_type^8.GetValueToPopType]" }
				pie9 = { image = "[?pie_chart_pop_type^9.GetValueToPopType]" }
				pie10 = { image = "[?pie_chart_pop_type^10.GetValueToPopType]" }
				pie11 = { image = "[?pie_chart_pop_type^11.GetValueToPopType]" }
				pie12 = { image = "[?pie_chart_pop_type^12.GetValueToPopType]" }
				pie13 = { image = "[?pie_chart_pop_type^13.GetValueToPopType]" }
				pie14 = { image = "[?pie_chart_pop_type^14.GetValueToPopType]" }
				pie15 = { image = "[?pie_chart_pop_type^15.GetValueToPopType]" }
				pie16 = { image = "[?pie_chart_pop_type^16.GetValueToPopType]" }
				pie17 = { image = "[?pie_chart_pop_type^17.GetValueToPopType]" }
				pie18 = { image = "[?pie_chart_pop_type^18.GetValueToPopType]" }
				pie19 = { image = "[?pie_chart_pop_type^19.GetValueToPopType]" }
				pie20 = { image = "[?pie_chart_pop_type^20.GetValueToPopType]" }
				pie21 = { image = "[?pie_chart_pop_type^21.GetValueToPopType]" }
				pie22 = { image = "[?pie_chart_pop_type^22.GetValueToPopType]" }
				pie23 = { image = "[?pie_chart_pop_type^23.GetValueToPopType]" }
				pie24 = { image = "[?pie_chart_pop_type^24.GetValueToPopType]" }
				pie25 = { image = "[?pie_chart_pop_type^25.GetValueToPopType]" }
				pie26 = { image = "[?pie_chart_pop_type^26.GetValueToPopType]" }
				pie27 = { image = "[?pie_chart_pop_type^27.GetValueToPopType]" }
				pie28 = { image = "[?pie_chart_pop_type^28.GetValueToPopType]" }
				pie29 = { image = "[?pie_chart_pop_type^29.GetValueToPopType]" }
				pie30 = { image = "[?pie_chart_pop_type^30.GetValueToPopType]" }
				pie31 = { image = "[?pie_chart_pop_type^31.GetValueToPopType]" }
				pie32 = { image = "[?pie_chart_pop_type^32.GetValueToPopType]" }
				pie33 = { image = "[?pie_chart_pop_type^33.GetValueToPopType]" }
				pie34 = { image = "[?pie_chart_pop_type^34.GetValueToPopType]" }
				pie35 = { image = "[?pie_chart_pop_type^35.GetValueToPopType]" }
				pie36 = { image = "[?pie_chart_pop_type^36.GetValueToPopType]" }
				pie37 = { image = "[?pie_chart_pop_type^37.GetValueToPopType]" }
				pie38 = { image = "[?pie_chart_pop_type^38.GetValueToPopType]" }
				pie39 = { image = "[?pie_chart_pop_type^39.GetValueToPopType]" }
				pie40 = { image = "[?pie_chart_pop_type^40.GetValueToPopType]" }
				pie41 = { image = "[?pie_chart_pop_type^41.GetValueToPopType]" }
				pie42 = { image = "[?pie_chart_pop_type^42.GetValueToPopType]" }
				pie43 = { image = "[?pie_chart_pop_type^43.GetValueToPopType]" }
				pie44 = { image = "[?pie_chart_pop_type^44.GetValueToPopType]" }
				pie45 = { image = "[?pie_chart_pop_type^45.GetValueToPopType]" }
				pie46 = { image = "[?pie_chart_pop_type^46.GetValueToPopType]" }
				pie47 = { image = "[?pie_chart_pop_type^47.GetValueToPopType]" }
				pie48 = { image = "[?pie_chart_pop_type^48.GetValueToPopType]" }
				pie49 = { image = "[?pie_chart_pop_type^49.GetValueToPopType]" }
				pie50 = { image = "[?pie_chart_pop_type^50.GetValueToPopType]" }
				pie51 = { image = "[?pie_chart_pop_type^51.GetValueToPopType]" }
				pie52 = { image = "[?pie_chart_pop_type^52.GetValueToPopType]" }
				pie53 = { image = "[?pie_chart_pop_type^53.GetValueToPopType]" }
				pie54 = { image = "[?pie_chart_pop_type^54.GetValueToPopType]" }
				pie55 = { image = "[?pie_chart_pop_type^55.GetValueToPopType]" }
				pie56 = { image = "[?pie_chart_pop_type^56.GetValueToPopType]" }
				pie57 = { image = "[?pie_chart_pop_type^57.GetValueToPopType]" }
				pie58 = { image = "[?pie_chart_pop_type^58.GetValueToPopType]" }
				pie59 = { image = "[?pie_chart_pop_type^59.GetValueToPopType]" }
				pie60 = { image = "[?pie_chart_pop_type^60.GetValueToPopType]" }
				pie61 = { image = "[?pie_chart_pop_type^61.GetValueToPopType]" }
				pie62 = { image = "[?pie_chart_pop_type^62.GetValueToPopType]" }
				pie63 = { image = "[?pie_chart_pop_type^63.GetValueToPopType]" }
				pie64 = { image = "[?pie_chart_pop_type^64.GetValueToPopType]" }
				pie65 = { image = "[?pie_chart_pop_type^65.GetValueToPopType]" }
				pie66 = { image = "[?pie_chart_pop_type^66.GetValueToPopType]" }
				pie67 = { image = "[?pie_chart_pop_type^67.GetValueToPopType]" }
				pie68 = { image = "[?pie_chart_pop_type^68.GetValueToPopType]" }
				pie69 = { image = "[?pie_chart_pop_type^69.GetValueToPopType]" }
				pie70 = { image = "[?pie_chart_pop_type^70.GetValueToPopType]" }
				pie71 = { image = "[?pie_chart_pop_type^71.GetValueToPopType]" }
				pie72 = { image = "[?pie_chart_pop_type^72.GetValueToPopType]" }
				pie73 = { image = "[?pie_chart_pop_type^73.GetValueToPopType]" }
				pie74 = { image = "[?pie_chart_pop_type^74.GetValueToPopType]" }
				pie75 = { image = "[?pie_chart_pop_type^75.GetValueToPopType]" }
				pie76 = { image = "[?pie_chart_pop_type^76.GetValueToPopType]" }
				pie77 = { image = "[?pie_chart_pop_type^77.GetValueToPopType]" }
				pie78 = { image = "[?pie_chart_pop_type^78.GetValueToPopType]" }
				pie79 = { image = "[?pie_chart_pop_type^79.GetValueToPopType]" }
				pie80 = { image = "[?pie_chart_pop_type^80.GetValueToPopType]" }
				pie81 = { image = "[?pie_chart_pop_type^81.GetValueToPopType]" }
				pie82 = { image = "[?pie_chart_pop_type^82.GetValueToPopType]" }
				pie83 = { image = "[?pie_chart_pop_type^83.GetValueToPopType]" }
				pie84 = { image = "[?pie_chart_pop_type^84.GetValueToPopType]" }
				pie85 = { image = "[?pie_chart_pop_type^85.GetValueToPopType]" }
				pie86 = { image = "[?pie_chart_pop_type^86.GetValueToPopType]" }
				pie87 = { image = "[?pie_chart_pop_type^87.GetValueToPopType]" }
				pie88 = { image = "[?pie_chart_pop_type^88.GetValueToPopType]" }
				pie89 = { image = "[?pie_chart_pop_type^89.GetValueToPopType]" }
				pie90 = { image = "[?pie_chart_pop_type^90.GetValueToPopType]" }
				pie91 = { image = "[?pie_chart_pop_type^91.GetValueToPopType]" }
				pie92 = { image = "[?pie_chart_pop_type^92.GetValueToPopType]" }
				pie93 = { image = "[?pie_chart_pop_type^93.GetValueToPopType]" }
				pie94 = { image = "[?pie_chart_pop_type^94.GetValueToPopType]" }
				pie95 = { image = "[?pie_chart_pop_type^95.GetValueToPopType]" }
				pie96 = { image = "[?pie_chart_pop_type^96.GetValueToPopType]" }
				pie97 = { image = "[?pie_chart_pop_type^97.GetValueToPopType]" }
				pie98 = { image = "[?pie_chart_pop_type^98.GetValueToPopType]" }
				pie99 = { image = "[?pie_chart_pop_type^99.GetValueToPopType]" }
			#
		}
	}
	construction_list = {
		window_name = "building_construction_container"
		parent_window_name = "state_economy_window_container"

		context_type = selected_state_context

		visible = {
			OR = {
				has_global_flag = autobuild_flag
				is_fully_controlled_by = ROOT
			}
			ROOT = { has_country_flag = construction_view_open }
		}

		triggers = {
			construction_entry_background_click_enabled = {
				set_temp_variable = { industry_token = construction_show^i }

				can_build_industry = yes

				# Has enough starting capital
					set_temp_variable = { pm_temp = controller:latest_production_method@var:v }
					set_temp_variable = { am_temp = controller:latest_automation_method@var:v }
					get_construction_cost = yes

					multiply_temp_variable = { total_construction_cost_temp = global.start_construction_cost_multiplier }
					divide_temp_variable = { total_construction_cost_temp = ROOT.modifier@government_investment_efficiency_factor }
					OR = {
						NOT = { check_variable = { total_construction_cost_temp > ROOT.treasury } }
						has_global_flag = autobuild_flag
					}
				#
			}
			industry_construction_background_visible = {
				#ROOT = { has_country_flag = construction_view_open }
			}
			construction_entry_background_visible = {
				#ROOT = { has_country_flag = construction_view_open }
			}
		}

		effects = {
			construction_pm_button_click = {
				add_to_variable = { construction_pm_selected = 1 }
				if = {
					limit = {
						check_variable = { construction_pm_selected > 3 }
					}
					set_variable = { construction_pm_selected = 3 }
				}
			}
			construction_pm_button_right_click = {
				subtract_from_variable = { construction_pm_selected = 1 }
				if = {
					limit = {
						check_variable = { construction_pm_selected < 0 }
					}
					set_variable = { construction_pm_selected = 0 }
				}
			}

			construction_entry_background_click = {
				if = {
					limit = {
						has_global_flag = autobuild_flag
					}
					add_to_variable = { size@var:v = 1  }
					#controller = { country_recalc = yes }
					refresh_construction_list = yes
				}
				else = {
					set_temp_variable = { x_temp = 1 }
					set_temp_variable = { financer_temp = ROOT }
					set_temp_variable = { industry_token = v }
					set_temp_variable = { production_method_temp = controller:latest_production_method@var:v }
					set_temp_variable = { automation_method_temp = controller:latest_automation_method@var:v }
					construct_x_industries = yes

					ROOT = { budget_update = yes }
				}
				ROOT = { clr_country_flag = construction_view_open }
				add_to_variable = { update_state_econ_window = 1 }
			}
		}

		dynamic_lists = {
			construction_list = {
				array = construction_show
				entry_container = construction_entry
			}
		}

		properties = {
			construction_entry_resource = {
				image = "[GetIconFromV]"
			}
		}
	}
	pm_list = {
		window_name = "building_pm_list_container"
		parent_window_name = "state_economy_window_container"

		context_type = selected_state_context

		visible = {
			ROOT = { has_country_flag = pm_view_open }
			is_in_array = { industries = ROOT.selected_industry }
		}

		triggers = {
			pm_entry_background_click_enabled = {
				set_temp_variable = { industry_token = ROOT.selected_industry }

				NOT = { check_variable = { production_method@var:industry_token = v } }
				NOT = { check_variable = { automation_method@var:industry_token = v } }

				is_fully_controlled_by = ROOT

				OR = {
					check_variable = { global.pm_tech_unlock@var:v = 0 }
					AND = {
						NOT = { check_variable = { global.pm_tech_unlock@var:v = -1 } }
						set_temp_variable = { tech_temp = global.pm_tech_unlock@var:v }
						controller = { has_tech = var:tech_temp }
					}
				}
				OR = {
					check_variable = { retooling_pm@var:industry_token = v }
					check_variable = { retooling_pm@var:industry_token = 0 }
				}
			}
			pm_available_icon_visible = {
				OR = {
					check_variable = { global.pm_tech_unlock@var:v = 0 }
					AND = {
						NOT = { check_variable = { global.pm_tech_unlock@var:v = -1 } }
						set_temp_variable = { tech_temp = global.pm_tech_unlock@var:v }
						controller = { has_tech = var:tech_temp }
					}
				}
			}
			pm_unavailable_icon_visible = {
				NOT = { check_variable = { global.pm_tech_unlock@var:v = 0 } }
				OR = {
					check_variable = { global.pm_tech_unlock@var:v = -1 }
					set_temp_variable = { tech_temp = global.pm_tech_unlock@var:v }
					NOT = { controller = { has_tech = var:tech_temp } }
				}
			}
			pm_cancel_retooling_visible = {
				is_fully_controlled_by = ROOT
				set_temp_variable = { industry_token = ROOT.selected_industry }
				check_variable = { retooling_pm@var:industry_token = v }
			}
			pm_current_pm_icon_visible = {
				set_temp_variable = { industry_token = ROOT.selected_industry }
				OR = {
					check_variable = { production_method@var:industry_token = v }
					check_variable = { automation_method@var:industry_token = v }
				}
			}
		}

		effects = {
			pm_entry_background_click = {
				set_temp_variable = { industry_token = ROOT.selected_industry }
				if = {
					limit = {
						check_variable = { retooling_pm@var:industry_token = 0 }
					}
					set_variable = { retooling_financier@var:industry_token = ROOT }
					set_variable = { retooling_pm@var:industry_token = v }
					set_temp_variable = { retooling_time_temp = controller:pm_retooling_duration@var:v }

					set_temp_variable = { modifier_temp = 1 }
					add_to_temp_variable = { modifier_temp = building_retooling_speed_factor }

					divide_temp_variable = { retooling_time_temp = modifier_temp }
					set_variable = { retooling_time@var:industry_token = retooling_time_temp }

					industries_update_construction_retooling = yes
					add_to_variable = { update_state_econ_window = 1 }
					ROOT = {
						clr_country_flag = pm_view_open
					}
					ROOT = { budget_update = yes }
				}
				else = {
					set_variable = { retooling_financier@var:industry_token = 0 }
					set_variable = { retooling_pm@var:industry_token = 0 }
					industries_update_construction_retooling = yes
					add_to_variable = { update_state_econ_window = 1 }
					ROOT = {
						clr_country_flag = pm_view_open
					}
					ROOT = { budget_update = yes }
				}
			}
			pm_cancel_retooling_click = {
				set_temp_variable = { industry_token = ROOT.selected_industry }
				set_variable = { retooling_pm@var:industry_token = 0 }
				industries_update_construction_retooling = yes
				add_to_variable = { update_state_econ_window = 1 }
				ROOT = {
					clr_country_flag = pm_view_open
					budget_update = yes
				}
			}
		}

		dynamic_lists = {
			pm_list = {
				array = ROOT.pm_show
				entry_container = pm_entry
			}
		}

		properties = {
			pm_entry_icon = {
				image = "[GetPMListIcon]"
			}
		}
	}

	trade_buttons_tab = {
		window_name = "trade_buttons_window"
		parent_window_token = trade_tab

		effects = {
			market_button_click = {
				clr_country_flag = trade_view_open
			}
			trade_button_click = {
				set_country_flag = trade_view_open
			}
		}
	}
	market_tab = {
		window_name = "market_tab"
		parent_window_token = trade_tab

		context_type = player_context

		visible = {
			NOT = { has_country_flag = trade_view_open }
		}

		triggers = {
			trade_resource_background_click_enabled = {
				NOT = { is_in_array = { global.non_tradeable_resources = resource_list_token_array^i } }
			}

			global_market_icon_visible = {
				check_variable = { selected_market = 0 }
			}
			market_flag_visible = {
				check_variable = { selected_market > 0 }
			}
		}

		effects = {
			natural_resources_filter_click = {
				if = {
					limit = {
						has_country_flag = resource_list_natural_resources_filter
					}
					clr_country_flag = resource_list_natural_resources_filter
				}
				else = {
					set_country_flag = resource_list_natural_resources_filter
					clr_country_flag = resource_list_produced_resources_filter
					clr_country_flag = resource_list_service_resources_filter
					clr_country_flag = resource_list_military_resources_filter
				}
				country_update_trade_display = yes
			}
			produced_resources_filter_click = {
				if = {
					limit = {
						has_country_flag = resource_list_produced_resources_filter
					}
					clr_country_flag = resource_list_produced_resources_filter
				}
				else = {
					set_country_flag = resource_list_produced_resources_filter
					clr_country_flag = resource_list_natural_resources_filter
					clr_country_flag = resource_list_service_resources_filter
					clr_country_flag = resource_list_military_resources_filter
				}
				country_update_trade_display = yes
			}
			service_resources_filter_click = {
				if = {
					limit = {
						has_country_flag = resource_list_service_resources_filter
					}
					clr_country_flag = resource_list_service_resources_filter
				}
				else = {
					set_country_flag = resource_list_service_resources_filter
					clr_country_flag = resource_list_produced_resources_filter
					clr_country_flag = resource_list_natural_resources_filter
					clr_country_flag = resource_list_military_resources_filter
				}
				country_update_trade_display = yes
			}
			military_resources_filter_click = {
				if = {
					limit = {
						has_country_flag = resource_list_military_resources_filter
					}
					clr_country_flag = resource_list_military_resources_filter
				}
				else = {
					set_country_flag = resource_list_military_resources_filter
					clr_country_flag = resource_list_produced_resources_filter
					clr_country_flag = resource_list_service_resources_filter
					clr_country_flag = resource_list_natural_resources_filter
				}
				country_update_trade_display = yes
			}

			sort_price_click = {
				if = {
					limit = {
						OR = {
							has_country_flag = resource_list_balance_sort
							has_country_flag = resource_list_resource_sort
							has_country_flag = resource_list_supply_sort
							has_country_flag = resource_list_demand_sort
						}
					}
					clr_country_flag = resource_list_balance_sort
					clr_country_flag = resource_list_resource_sort
					clr_country_flag = resource_list_supply_sort
					clr_country_flag = resource_list_demand_sort
				}
				else = {
					if = {
						limit = {
							has_country_flag = resource_list_invert_sort
						}
						clr_country_flag = resource_list_invert_sort
					}
					else = {
						set_country_flag = resource_list_invert_sort
					}
				}
				country_update_trade_display = yes
			}
			sort_balance_click = {
				if = {
					limit = {
						NOT = {
							has_country_flag = resource_list_balance_sort
						}
					}
					set_country_flag = resource_list_balance_sort
					clr_country_flag = resource_list_resource_sort
					clr_country_flag = resource_list_supply_sort
					clr_country_flag = resource_list_demand_sort
				}
				else = {
					if = {
						limit = {
							has_country_flag = resource_list_invert_sort
						}
						clr_country_flag = resource_list_invert_sort
					}
					else = {
						set_country_flag = resource_list_invert_sort
					}
				}
				country_update_trade_display = yes
			}
			sort_supply_click = {
				if = {
					limit = {
						NOT = {
							has_country_flag = resource_list_supply_sort
						}
					}
					set_country_flag = resource_list_supply_sort
					clr_country_flag = resource_list_resource_sort
					clr_country_flag = resource_list_balance_sort
					clr_country_flag = resource_list_demand_sort
				}
				else = {
					if = {
						limit = {
							has_country_flag = resource_list_invert_sort
						}
						clr_country_flag = resource_list_invert_sort
					}
					else = {
						set_country_flag = resource_list_invert_sort
					}
				}
				country_update_trade_display = yes
			}
			sort_demand_click = {
				if = {
					limit = {
						NOT = {
							has_country_flag = resource_list_demand_sort
						}
					}
					set_country_flag = resource_list_demand_sort
					clr_country_flag = resource_list_resource_sort
					clr_country_flag = resource_list_balance_sort
					clr_country_flag = resource_list_supply_sort
				}
				else = {
					if = {
						limit = {
							has_country_flag = resource_list_invert_sort
						}
						clr_country_flag = resource_list_invert_sort
					}
					else = {
						set_country_flag = resource_list_invert_sort
					}
				}
				country_update_trade_display = yes
			}
			sort_resource_click = {
				if = {
					limit = {
						NOT = {
							has_country_flag = resource_list_resource_sort
						}
					}
					set_country_flag = resource_list_resource_sort
					clr_country_flag = resource_list_demand_sort
					clr_country_flag = resource_list_balance_sort
					clr_country_flag = resource_list_supply_sort
				}
				else = {
					if = {
						limit = {
							has_country_flag = resource_list_invert_sort
						}
						clr_country_flag = resource_list_invert_sort
					}
					else = {
						set_country_flag = resource_list_invert_sort
					}
				}
				country_update_trade_display = yes
			}

			trade_resource_background_click = {
				if = {
					limit = {
						NOT = { is_in_array = { global.non_tradeable_resources = v } }
					}
					set_country_flag = trade_view_open
					set_temp_variable = { resource_temp = v }
					log = "Resource: [?v.GetTokenLocalizedKey]"
					add_trade = yes
				}
			}
		}

		properties = {
			market_flag = {
				image = "[GetResourceListFlag]"
			}
			natural_resources_filter = {
				image = "[GetNaturalResourcesButton]"
			}
			produced_resources_filter = {
				image = "[GetProducedResourcesButton]"
			}
			service_resources_filter = {
				image = "[GetServiceResourcesButton]"
			}
			military_resources_filter = {
				image = "[GetMilitaryResourcesButton]"
			}

			trade_resource_background = {
				image = "[GetResourceListBackground]"
			}
			trade_resource_icon = {
				image = "[GetResourceListIcon]"
			}
			trade_resource_price_icon = {
				image = "[GetResourceListPriceIcon]"
			}
			trade_resource_balance_bar_negative = {
				frame = resource_list_right_balance_bar_array^i
			}
			trade_resource_balance_bar_positive = {
				frame = resource_list_left_balance_bar_array^i
			}
			trade_resource_price_bar_negative = {
				frame = resource_list_left_price_bar_array^i
			}
			trade_resource_price_bar_positive = {
				frame = resource_list_right_price_bar_array^i
			}

			trade_resource_price_icon = {
				image = "[GetCurrencyIcon]"
			}
		}
		dynamic_lists = {
			market_resource_list = {
				array = resource_list_token_array
				entry_container = trade_resource_entry
			}
		}
	}
	market_list_view = {
		window_name = "market_list_view"
		parent_window_token = trade_tab

		context_type = player_context

		visible = {
			NOT = { has_country_flag = trade_view_open }
		}

		effects = {
			can_trade_checkbox_click = {
				if = {
					limit = {
						has_country_flag = market_list_can_trade_filter
					}
					clr_country_flag = market_list_can_trade_filter
				}
				else = {
					set_country_flag = market_list_can_trade_filter
				}
				country_update_trade_display = yes
			}
			allied_checkbox_click = {
				if = {
					limit = {
						has_country_flag = market_list_allied_filter
					}
					clr_country_flag = market_list_allied_filter
				}
				else = {
					set_country_flag = market_list_allied_filter
					clr_country_flag = market_list_enemy_filter
				}
				country_update_trade_display = yes
			}
			enemy_checkbox_click = {
				if = {
					limit = {
						has_country_flag = market_list_enemy_filter
					}
					clr_country_flag = market_list_enemy_filter
				}
				else = {
					set_country_flag = market_list_enemy_filter
					clr_country_flag = market_list_allied_filter
				}
				country_update_trade_display = yes
			}

			global_market_button_click = {
				set_variable = { selected_market = 0 }
				country_update_trade_display = yes
			}
			market_background_click = {
				set_variable = { selected_market = country_temp }
				country_update_trade_display = yes
			}
		}

		properties = {
			can_trade_checkbox = {
				image = "[GetMarketTradeableCheckbox]"
			}
			allied_checkbox = {
				image = "[GetMarketAlliedCheckbox]"
			}
			enemy_checkbox = {
				image = "[GetMarketEnemyCheckbox]"
			}

			market_background = {
				image = "[GetMarketListBackground]"
			}
			market_flag ={
				image = "[?country_temp.GetFlag]"
			}
		}

		dynamic_lists = {
			markets_grid = {
				array = market_list
				entry_container = market_entry
				value = country_temp
			}
		}
	}
	trade_window_tab = {
		window_name = "trade_tab"
		parent_window_token = trade_tab

		context_type = player_context

		visible = {
			has_country_flag = trade_view_open
		}

		triggers = {
			#Market Balance
				high_balance_first_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = high_balance_array^0 } }
				}
				high_balance_second_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = high_balance_array^1 } }
				}
				high_balance_third_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = high_balance_array^2 } }
				}
				high_balance_fourth_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = high_balance_array^3 } }
				}
				high_balance_fifth_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = high_balance_array^4 } }
				}

				low_balance_first_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = low_balance_array^0 } }
				}
				low_balance_second_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = low_balance_array^1 } }
				}
				low_balance_third_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = low_balance_array^2 } }
				}
				low_balance_fourth_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = low_balance_array^3 } }
				}
				low_balance_fifth_entry_background_click_enabled = {
					NOT = { is_in_array = { global.non_tradeable_resources = low_balance_array^4 } }
				}
			#

			trade_route_decrease_size_click_enabled = {
				NOT = { has_idea = free_trade }
			}
			trade_route_increase_size_click_enabled = {
				NOT = { has_idea = free_trade }
			}
			trade_route_remove_trade_route_click_enabled = {
				NOT = { has_idea = free_trade }
			}
			trade_route_automation_click_enabled = {
				NOT = { has_idea = free_trade }
				NOT = { has_idea = export_focus }
			}
		}

		effects = {
			# Market Balance
				high_balance_first_entry_background_click = {
					set_temp_variable = { resource_temp = high_balance_array^0 }
					add_trade = yes
				}
				high_balance_second_entry_background_click = {
					set_temp_variable = { resource_temp = high_balance_array^1 }
					add_trade = yes
				}
				high_balance_third_entry_background_click = {
					set_temp_variable = { resource_temp = high_balance_array^2 }
					add_trade = yes
				}
				high_balance_fourth_entry_background_click = {
					set_temp_variable = { resource_temp = high_balance_array^3 }
					add_trade = yes
				}
				high_balance_fifth_entry_background_click = {
					set_temp_variable = { resource_temp = high_balance_array^4 }
					add_trade = yes
				}

				low_balance_first_entry_background_click = {
					set_temp_variable = { resource_temp = low_balance_array^0 }
					add_trade = yes
				}
				low_balance_second_entry_background_click = {
					set_temp_variable = { resource_temp = low_balance_array^1 }
					add_trade = yes
				}
				low_balance_third_entry_background_click = {
					set_temp_variable = { resource_temp = low_balance_array^2 }
					add_trade = yes
				}
				low_balance_fourth_entry_background_click = {
					set_temp_variable = { resource_temp = low_balance_array^3 }
					add_trade = yes
				}
				low_balance_fifth_entry_background_click = {
					set_temp_variable = { resource_temp = low_balance_array^4 }
					add_trade = yes
				}
			#

			trade_route_automation_click = {
				if = {
					limit = {
						check_variable = { trade_ai@var:v = 0 }
					}
					set_variable = { trade_ai@var:v = 1 }
				}
				else = {
					clear_variable = trade_ai@var:v
				}
			}

			trade_route_decrease_size_click = {
				set_temp_variable = { resource_temp = v }
				trade_ai_determine_max_trade = yes
				set_temp_variable = { amount_temp = -1 }
				adjust_trade = yes
			}
			trade_route_decrease_size_shift_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = -10 }
				adjust_trade = yes
			}
			trade_route_decrease_size_control_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = -100 }
				adjust_trade = yes
			}
			trade_route_decrease_size_right_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = -1000 }
				adjust_trade = yes
			}
			trade_route_increase_size_click = {
				set_temp_variable = { resource_temp = v }
				trade_ai_determine_max_trade = yes
				set_temp_variable = { amount_temp = 1 }
				adjust_trade = yes
			}
			trade_route_increase_size_shift_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = 10 }
				adjust_trade = yes
			}
			trade_route_increase_size_control_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = 100 }
				adjust_trade = yes
			}
			trade_route_increase_size_right_click = {
				set_temp_variable = { resource_temp = v }
				set_temp_variable = { amount_temp = 1000 }
				adjust_trade = yes
			}

			trade_route_remove_route_click = {
				set_temp_variable = { resource_temp = v }
				remove_trade = yes
			}
		}

		properties = {
			#Market Balance
				high_balance_first_entry_icon = {
					image = "[GetHighBalanceFirstIcon]"
				}
				high_balance_second_entry_icon = {
					image = "[GetHighBalanceSecondIcon]"
				}
				high_balance_third_entry_icon = {
					image = "[GetHighBalanceThirdIcon]"
				}
				high_balance_fourth_entry_icon = {
					image = "[GetHighBalanceFourthIcon]"
				}
				high_balance_fifth_entry_icon = {
					image = "[GetHighBalanceFifthIcon]"
				}
				high_balance_first_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				high_balance_second_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				high_balance_third_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				high_balance_fourth_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				high_balance_fifth_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}

				low_balance_first_entry_icon = {
					image = "[GetLowBalanceFirstIcon]"
				}
				low_balance_second_entry_icon = {
					image = "[GetLowBalanceSecondIcon]"
				}
				low_balance_third_entry_icon = {
					image = "[GetLowBalanceThirdIcon]"
				}
				low_balance_fourth_entry_icon = {
					image = "[GetLowBalanceFourthIcon]"
				}
				low_balance_fifth_entry_icon = {
					image = "[GetLowBalanceFifthIcon]"
				}
				low_balance_first_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				low_balance_second_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				low_balance_third_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				low_balance_fourth_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
				low_balance_fifth_entry_price_icon = {
					image = "[GetCurrencyIcon]"
				}
			#
			#Trade Routes
				trade_routes_icon = {
					image = "[GetTradeRouteResourceIcon]"
				}
				trade_route_exporter_flag = {
					image = "[GetTradeRouteExporterFlag]"
				}
				trade_route_importer_flag = {
					image = "[GetTradeRouteImporterFlag]"
				}
				trade_route_automation = {
					image = "[GetTradeRouteAutomationButton]"
				}
			#
		}

		dynamic_lists = {
			trade_route_list = {
				array = show_trade_routes
				entry_container = trade_route_entry
			}
		}
	}

	country_view_economy = {
		window_name = "topbar_economy_container"
		parent_window_token = top_bar
		context_type = player_context

		visible = {
			always = yes
		}
		effects = {
			country_view_economy_button_click = {
				if = {
					limit = {
						NOT = {
							ROOT = {
								has_country_flag = country_economy_view_open
							}
						}
					}
					ROOT = {
						set_country_flag = country_economy_view_open
					}
				}
				else = {
					ROOT = {
						clr_country_flag = country_economy_view_open
						close_repay_debt_window = yes
						close_borrow_money_window = yes
					}
				}
			}
		}
		triggers = {
			country_view_economy_button_click_enabled = {
				always = yes
			}
		}
		properties = {
			military_goods_icon = {
				image = "[GetCurrencyIcon]"
			}
		}
	}
	country_economy_window = {
		window_name = "country_economy_window_container"
		context_type = player_context

		visible = {
			ROOT = {
				has_country_flag = country_economy_view_open
			}
		}

		triggers = {
			# Disabled Buttons
				govt_increase_import_tariff_button_click_enabled = {
					check_variable = { import_subsidy_percentage = 0 }
				}
				govt_increase_export_tariff_button_click_enabled = {
					check_variable = { export_subsidy_percentage = 0 }
				}

				govt_decrease_intelligence_spending_button_click_enabled = {
					always = no
				}
				govt_increase_intelligence_spending_button_click_enabled = {
					always = no
				}

				# govt_decrease_import_subsidy_button_click_enabled = {
				# 	# always = no
				# }
				govt_increase_import_subsidy_button_click_enabled = {
					check_variable = { import_tariff_percentage = 0 }
				}
				# govt_decrease_export_subsidy_button_click_enabled = {
				# 	# always = no
				# }
				govt_increase_export_subsidy_button_click_enabled = {
					check_variable = { export_tariff_percentage = 0 }
				}
				govt_decrease_industrial_subsidy_button_click_enabled = {
					always = no
				}
				govt_increase_industrial_subsidy_button_click_enabled = {
					always = no
				}
				govt_decrease_infrastructure_subsidy_button_click_enabled = {
					always = no
				}
				govt_increase_infrastructure_subsidy_button_click_enabled = {
					always = no
				}

				govt_national_bank_increase_interest_button_click_enabled = {
					always = no
				}
				govt_national_bank_decrease_interest_button_click_enabled = {
					always = no
				}
			#
			# Stopper Visibility
				govt_upper_strata_income_tax_stopper_max_visible = {
					check_variable = { income_tax_upper_strata_max < 100 }
				}
				govt_upper_strata_income_tax_stopper_min_visible = {
					check_variable = { income_tax_upper_strata_min > 0 }
				}
				govt_middle_strata_income_tax_stopper_max_visible = {
					check_variable = { income_tax_middle_strata_max < 100 }
				}
				govt_middle_strata_income_tax_stopper_min_visible = {
					check_variable = { income_tax_middle_strata_min > 0 }
				}
				govt_lower_strata_income_tax_stopper_max_visible = {
					check_variable = { income_tax_lower_strata_max < 100 }
				}
				govt_lower_strata_income_tax_stopper_min_visible = {
					check_variable = { income_tax_lower_strata_min > 0 }
				}
				govt_sales_tax_stopper_max_visible = {
					check_variable = { sales_tax_max < 100 }
				}
				govt_sales_tax_stopper_min_visible = {
					check_variable = { sales_tax_min > 0 }
				}
				govt_corporate_tax_stopper_max_visible = {
					check_variable = { corporate_tax_max < 100 }
				}
				govt_corporate_tax_stopper_min_visible = {
					check_variable = { corporate_tax_min > 0 }
				}
				govt_import_tariff_stopper_max_visible = {
					check_variable = { import_tariff_max < 100 }
				}
				govt_import_tariff_stopper_min_visible = {
					check_variable = { import_tariff_min > -100 }
				}
				govt_export_tariff_stopper_max_visible = {
					check_variable = { export_tariff_max < 100 }
				}
				govt_export_tariff_stopper_min_visible = {
					check_variable = { export_tariff_min > -100 }
				}

				govt_military_spending_stopper_max_visible = {
					check_variable = { military_spending_max < 100 }
				}
				govt_military_spending_stopper_min_visible = {
					check_variable = { military_spending_min > 0 }
				}
				govt_research_spending_stopper_max_visible = {
					check_variable = { research_spending_max < 100 }
				}
				govt_research_spending_stopper_min_visible = {
					check_variable = { research_spending_min > 0 }
				}
				govt_construction_spending_stopper_max_visible = {
					check_variable = { construction_spending_max < 100 }
				}
				govt_construction_spending_stopper_min_visible = {
					check_variable = { construction_spending_min > 0 }
				}
				govt_subsidies_spending_stopper_max_visible = {
					check_variable = { subsidies_spending_max < 100 }
				}
				govt_subsidies_spending_stopper_min_visible = {
					check_variable = { subsidies_spending_min > 0 }
				}
			#

			govt_borrow_money_button_click_enabled = {

			}
			govt_repay_debt_button_click_enabled = {
				check_variable = { treasury > 0.990 }
			}

			time_button_visible = {
				is_debug = yes
			}
			time_button_title_visible = {
				is_debug = yes
			}
			reset_button_visible = {
				is_debug = yes
			}
			reset_button_title_visible = {
				is_debug = yes
			}
			extra_button_visible = {
				is_debug = yes
			}
			extra_button_title_visible = {
				is_debug = yes
			}
		}

		effects = {
			close_button_click = {
				ROOT = {
					clr_country_flag = country_economy_view_open
					close_repay_debt_window = yes
					close_borrow_money_window = yes
				}
			}

			#Upper Strata Income Tax
				govt_decrease_upper_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_upper_strata_income_tax = yes
				}
				govt_decrease_upper_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_upper_strata_income_tax = yes
				}
				govt_decrease_upper_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_upper_strata_income_tax = yes
				}
				govt_decrease_upper_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_upper_strata_income_tax = yes
				}
				govt_increase_upper_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_upper_strata_income_tax = yes
				}
				govt_increase_upper_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_upper_strata_income_tax = yes
				}
				govt_increase_upper_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_upper_strata_income_tax = yes
				}
				govt_increase_upper_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_upper_strata_income_tax = yes
				}
			#
			#Middle Strata Income Tax
				govt_decrease_middle_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_middle_strata_income_tax = yes
				}
				govt_decrease_middle_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_middle_strata_income_tax = yes
				}
				govt_decrease_middle_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_middle_strata_income_tax = yes
				}
				govt_decrease_middle_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_middle_strata_income_tax = yes
				}
				govt_increase_middle_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_middle_strata_income_tax = yes
				}
				govt_increase_middle_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_middle_strata_income_tax = yes
				}
				govt_increase_middle_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_middle_strata_income_tax = yes
				}
				govt_increase_middle_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_middle_strata_income_tax = yes
				}
			#
			#Lower Strata Income Tax
				govt_decrease_lower_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_lower_strata_income_tax = yes
				}
				govt_decrease_lower_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_lower_strata_income_tax = yes
				}
				govt_decrease_lower_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_lower_strata_income_tax = yes
				}
				govt_decrease_lower_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_lower_strata_income_tax = yes
				}
				govt_increase_lower_strata_income_tax_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_lower_strata_income_tax = yes
				}
				govt_increase_lower_strata_income_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_lower_strata_income_tax = yes
				}
				govt_increase_lower_strata_income_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_lower_strata_income_tax = yes
				}
				govt_increase_lower_strata_income_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_lower_strata_income_tax = yes
				}
			#

			#Sales Tax
				govt_decrease_sales_tax_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_sales_tax = yes
				}
				govt_decrease_sales_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_sales_tax = yes
				}
				govt_decrease_sales_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_sales_tax = yes
				}
				govt_decrease_sales_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_sales_tax = yes
				}
				govt_increase_sales_tax_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_sales_tax = yes
				}
				govt_increase_sales_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_sales_tax = yes
				}
				govt_increase_sales_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_sales_tax = yes
				}
				govt_increase_sales_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_sales_tax = yes
				}
			#
			#Corporate Tax
				govt_decrease_corporate_tax_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_corporate_tax = yes
				}
				govt_decrease_corporate_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_corporate_tax = yes
				}
				govt_decrease_corporate_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_corporate_tax = yes
				}
				govt_decrease_corporate_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_corporate_tax = yes
				}
				govt_increase_corporate_tax_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_corporate_tax = yes
				}
				govt_increase_corporate_tax_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_corporate_tax = yes
				}
				govt_increase_corporate_tax_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_corporate_tax = yes
				}
				govt_increase_corporate_tax_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_corporate_tax = yes
				}
			#
			#Import Tariffs
				govt_decrease_import_tariff_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_import_tariff = yes
				}
				govt_decrease_import_tariff_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_import_tariff = yes
				}
				govt_decrease_import_tariff_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_import_tariff = yes
				}
				govt_decrease_import_tariff_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_import_tariff = yes
				}
				govt_increase_import_tariff_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_import_tariff = yes
				}
				govt_increase_import_tariff_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_import_tariff = yes
				}
				govt_increase_import_tariff_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_import_tariff = yes
				}
				govt_increase_import_tariff_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_import_tariff = yes
				}
			#
			#Export Tariffs
				govt_decrease_export_tariff_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_export_tariff = yes
				}
				govt_decrease_export_tariff_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_export_tariff = yes
				}
				govt_decrease_export_tariff_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_export_tariff = yes
				}
				govt_decrease_export_tariff_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_export_tariff = yes
				}
				govt_increase_export_tariff_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_export_tariff = yes
				}
				govt_increase_export_tariff_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_export_tariff = yes
				}
				govt_increase_export_tariff_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_export_tariff = yes
				}
				govt_increase_export_tariff_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_export_tariff = yes
				}
			#

			#Military Spending
				govt_decrease_military_spending_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_military_spending = yes
				}
				govt_decrease_military_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_military_spending = yes
				}
				govt_decrease_military_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_military_spending = yes
				}
				govt_decrease_military_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_military_spending = yes
				}
				govt_increase_military_spending_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_military_spending = yes
				}
				govt_increase_military_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_military_spending = yes
				}
				govt_increase_military_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_military_spending = yes
				}
				govt_increase_military_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_military_spending = yes
				}
			#
			#Research Subsidies
				govt_decrease_research_spending_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_research_spending = yes
				}
				govt_decrease_research_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_research_spending = yes
				}
				govt_decrease_research_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_research_spending = yes
				}
				govt_decrease_research_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_research_spending = yes
				}
				govt_increase_research_spending_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_research_spending = yes
				}
				govt_increase_research_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_research_spending = yes
				}
				govt_increase_research_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_research_spending = yes
				}
				govt_increase_research_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_research_spending = yes
				}
			#
			#Construction Spending
				govt_decrease_construction_spending_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_construction_spending = yes
				}
				govt_decrease_construction_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_construction_spending = yes
				}
				govt_decrease_construction_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_construction_spending = yes
				}
				govt_decrease_construction_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_construction_spending = yes
				}
				govt_increase_construction_spending_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_construction_spending = yes
				}
				govt_increase_construction_spending_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_construction_spending = yes
				}
				govt_increase_construction_spending_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_construction_spending = yes
				}
				govt_increase_construction_spending_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_construction_spending = yes
				}
			#

			#Import Subsidies
				govt_decrease_import_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_import_subsidy = yes
				}
				govt_decrease_import_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_import_subsidy = yes
				}
				govt_decrease_import_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_import_subsidy = yes
				}
				govt_decrease_import_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_import_subsidy = yes
				}
				govt_increase_import_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_import_subsidy = yes
				}
				govt_increase_import_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_import_subsidy = yes
				}
				govt_increase_import_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_import_subsidy = yes
				}
				govt_increase_import_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_import_subsidy = yes
				}
			#
			#Export Subsidies
				govt_decrease_export_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_export_subsidy = yes
				}
				govt_decrease_export_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_export_subsidy = yes
				}
				govt_decrease_export_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_export_subsidy = yes
				}
				govt_decrease_export_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_export_subsidy = yes
				}
				govt_increase_export_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_export_subsidy = yes
				}
				govt_increase_export_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_export_subsidy = yes
				}
				govt_increase_export_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_export_subsidy = yes
				}
				govt_increase_export_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_export_subsidy = yes
				}
			#
			#Infrastructure Subsidies
				govt_decrease_infrastructure_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_infrastructure_subsidy = yes
				}
				govt_decrease_infrastructure_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_infrastructure_subsidy = yes
				}
				govt_decrease_infrastructure_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_infrastructure_subsidy = yes
				}
				govt_decrease_infrastructure_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_infrastructure_subsidy = yes
				}
				govt_increase_infrastructure_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_infrastructure_subsidy = yes
				}
				govt_increase_infrastructure_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_infrastructure_subsidy = yes
				}
				govt_increase_infrastructure_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_infrastructure_subsidy = yes
				}
				govt_increase_infrastructure_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_infrastructure_subsidy = yes
				}
			#
			#Industrial Subsidies
				govt_decrease_industrial_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = -1 }
					change_industrial_subsidy = yes
				}
				govt_decrease_industrial_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = -5 }
					change_industrial_subsidy = yes
				}
				govt_decrease_industrial_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = -10 }
					change_industrial_subsidy = yes
				}
				govt_decrease_industrial_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = -25 }
					change_industrial_subsidy = yes
				}
				govt_increase_industrial_subsidy_button_click = {
					set_temp_variable = { percent_change_temp = 1 }
					change_industrial_subsidy = yes
				}
				govt_increase_industrial_subsidy_button_shift_click = {
					set_temp_variable = { percent_change_temp = 5 }
					change_industrial_subsidy = yes
				}
				govt_increase_industrial_subsidy_button_control_click = {
					set_temp_variable = { percent_change_temp = 10 }
					change_industrial_subsidy = yes
				}
				govt_increase_industrial_subsidy_button_control_shift_click = {
					set_temp_variable = { percent_change_temp = 25 }
					change_industrial_subsidy = yes
				}
			#

			#Borrow Money Button
				govt_borrow_money_button_click = {
					set_temp_variable = { x_temp = 0.1 }
					set_temp_variable = { country_temp = 0 }
					borrow_money = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_borrow_money_button_shift_click = {
					set_temp_variable = { x_temp = 1 }
					set_temp_variable = { country_temp = 0 }
					borrow_money = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_borrow_money_button_control_click = {
					set_temp_variable = { x_temp = 10 }
					set_temp_variable = { country_temp = 0 }
					borrow_money = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_borrow_money_button_control_shift_click = {
					set_temp_variable = { x_temp = 100 }
					set_temp_variable = { country_temp = 0 }
					borrow_money = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
			#
			#Repay Debt Button
				govt_repay_debt_button_click = {
					set_temp_variable = { x_temp = 0.1 }
					set_temp_variable = { country_temp = 0 }
					repay_debt = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_repay_debt_button_shift_click = {
					set_temp_variable = { x_temp = 1 }
					set_temp_variable = { country_temp = 0 }
					repay_debt = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_repay_debt_button_control_click = {
					set_temp_variable = { x_temp = 10 }
					set_temp_variable = { country_temp = 0 }
					repay_debt = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_repay_debt_button_control_shift_click = {
					set_temp_variable = { x_temp = 100 }
					set_temp_variable = { country_temp = 0 }
					repay_debt = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
				govt_repay_debt_button_right_click = {
					set_temp_variable = { x_temp = treasury }
					divide_temp_variable = { x_temp = 1000 }
					set_temp_variable = { country_temp = 0 }
					repay_debt = yes
					add_to_variable = { update_state_econ_window = 1 }
				}
			#


			time_button_click = {
				ROOT = { _country_advance_time = yes }
			}
			reset_button_click = {
				ROOT = { _country_reset = yes }
			}
			extra_button_click = {
				set_temp_variable = { x_temp = 10 }
				set_temp_variable = { country_temp = ENG }
				add_debt = yes
			}
		}
        properties = {
			govt_upper_strata_income_tax_icon = {
				x = income_tax_upper_strata_percentage
			}
			govt_upper_strata_income_tax_stopper_max = {
				x = income_tax_upper_strata_max_pos
			}
			govt_upper_strata_income_tax_stopper_min = {
				x = income_tax_upper_strata_min_pos
			}
			govt_middle_strata_income_tax_icon = {
				x = income_tax_middle_strata_percentage
			}
			govt_middle_strata_income_tax_stopper_max = {
				x = income_tax_middle_strata_max_pos
			}
			govt_middle_strata_income_tax_stopper_min = {
				x = income_tax_middle_strata_min_pos
			}
			govt_lower_strata_income_tax_icon = {
				x = income_tax_lower_strata_percentage
			}
			govt_lower_strata_income_tax_stopper_max = {
				x = income_tax_lower_strata_max_pos
			}
			govt_lower_strata_income_tax_stopper_min = {
				x = income_tax_lower_strata_min_pos
			}
			govt_sales_tax_icon = {
				x = sales_tax_percentage
			}
			govt_sales_tax_stopper_max = {
				x = sales_tax_max_pos
			}
			govt_sales_tax_stopper_min = {
				x = sales_tax_min_pos
			}
			govt_corporate_tax_icon = {
				x = corporate_tax_percentage
			}
			govt_corporate_tax_stopper_max = {
				x = corporate_tax_max_pos
			}
			govt_corporate_tax_stopper_min = {
				x = corporate_tax_min_pos
			}
			govt_import_tariff_icon = {
				x = import_tariff_slider_pos
			}
			govt_import_tariff_stopper_max = {
				x = import_tariff_max_pos
			}
			govt_import_tariff_stopper_min = {
				x = import_tariff_min_pos
			}
			govt_export_tariff_icon = {
				x = export_tariff_slider_pos
			}
			govt_export_tariff_stopper_max = {
				x = export_tariff_max_pos
			}
			govt_export_tariff_stopper_min = {
				x = export_tariff_min_pos
			}

			govt_military_spending_icon = {
				x = military_spending_percentage
			}
			govt_military_spending_stopper_max = {
				x = military_spending_max_pos
			}
			govt_military_spending_stopper_min = {
				x = military_spending_min_pos
			}
			govt_construction_spending_icon = {
				x = construction_spending_percentage
			}
			govt_construction_spending_stopper_max = {
				x = construction_spending_max_pos
			}
			govt_construction_spending_stopper_min = {
				x = construction_spending_min_pos
			}
			govt_research_spending_icon = {
				x = research_spending_percentage
			}
			govt_research_spending_stopper_max = {
				x = research_spending_max_pos
			}
			govt_research_spending_stopper_min = {
				x = research_spending_min_pos
			}
			govt_subsidies_spending_icon = {
				x = subsidies_spending_percentage
			}
			govt_subsidies_spending_stopper_max = {
				x = subsidies_spending_max_pos
			}
			govt_subsidies_spending_stopper_min = {
				x = subsidies_spending_min_pos
			}

			line_segment = {
				frame = segment_value
			}

			#Rev Pie Segments
				revpie0 = { image = "[?pie_chart_revenue_type^0.GetValueToPopType]" }
				revpie1 = { image = "[?pie_chart_revenue_type^1.GetValueToPopType]" }
				revpie2 = { image = "[?pie_chart_revenue_type^2.GetValueToPopType]" }
				revpie3 = { image = "[?pie_chart_revenue_type^3.GetValueToPopType]" }
				revpie4 = { image = "[?pie_chart_revenue_type^4.GetValueToPopType]" }
				revpie5 = { image = "[?pie_chart_revenue_type^5.GetValueToPopType]" }
				revpie6 = { image = "[?pie_chart_revenue_type^6.GetValueToPopType]" }
				revpie7 = { image = "[?pie_chart_revenue_type^7.GetValueToPopType]" }
				revpie8 = { image = "[?pie_chart_revenue_type^8.GetValueToPopType]" }
				revpie9 = { image = "[?pie_chart_revenue_type^9.GetValueToPopType]" }
				revpie10 = { image = "[?pie_chart_revenue_type^10.GetValueToPopType]" }
				revpie11 = { image = "[?pie_chart_revenue_type^11.GetValueToPopType]" }
				revpie12 = { image = "[?pie_chart_revenue_type^12.GetValueToPopType]" }
				revpie13 = { image = "[?pie_chart_revenue_type^13.GetValueToPopType]" }
				revpie14 = { image = "[?pie_chart_revenue_type^14.GetValueToPopType]" }
				revpie15 = { image = "[?pie_chart_revenue_type^15.GetValueToPopType]" }
				revpie16 = { image = "[?pie_chart_revenue_type^16.GetValueToPopType]" }
				revpie17 = { image = "[?pie_chart_revenue_type^17.GetValueToPopType]" }
				revpie18 = { image = "[?pie_chart_revenue_type^18.GetValueToPopType]" }
				revpie19 = { image = "[?pie_chart_revenue_type^19.GetValueToPopType]" }
				revpie20 = { image = "[?pie_chart_revenue_type^20.GetValueToPopType]" }
				revpie21 = { image = "[?pie_chart_revenue_type^21.GetValueToPopType]" }
				revpie22 = { image = "[?pie_chart_revenue_type^22.GetValueToPopType]" }
				revpie23 = { image = "[?pie_chart_revenue_type^23.GetValueToPopType]" }
				revpie24 = { image = "[?pie_chart_revenue_type^24.GetValueToPopType]" }
				revpie25 = { image = "[?pie_chart_revenue_type^25.GetValueToPopType]" }
				revpie26 = { image = "[?pie_chart_revenue_type^26.GetValueToPopType]" }
				revpie27 = { image = "[?pie_chart_revenue_type^27.GetValueToPopType]" }
				revpie28 = { image = "[?pie_chart_revenue_type^28.GetValueToPopType]" }
				revpie29 = { image = "[?pie_chart_revenue_type^29.GetValueToPopType]" }
				revpie30 = { image = "[?pie_chart_revenue_type^30.GetValueToPopType]" }
				revpie31 = { image = "[?pie_chart_revenue_type^31.GetValueToPopType]" }
				revpie32 = { image = "[?pie_chart_revenue_type^32.GetValueToPopType]" }
				revpie33 = { image = "[?pie_chart_revenue_type^33.GetValueToPopType]" }
				revpie34 = { image = "[?pie_chart_revenue_type^34.GetValueToPopType]" }
				revpie35 = { image = "[?pie_chart_revenue_type^35.GetValueToPopType]" }
				revpie36 = { image = "[?pie_chart_revenue_type^36.GetValueToPopType]" }
				revpie37 = { image = "[?pie_chart_revenue_type^37.GetValueToPopType]" }
				revpie38 = { image = "[?pie_chart_revenue_type^38.GetValueToPopType]" }
				revpie39 = { image = "[?pie_chart_revenue_type^39.GetValueToPopType]" }
				revpie40 = { image = "[?pie_chart_revenue_type^40.GetValueToPopType]" }
				revpie41 = { image = "[?pie_chart_revenue_type^41.GetValueToPopType]" }
				revpie42 = { image = "[?pie_chart_revenue_type^42.GetValueToPopType]" }
				revpie43 = { image = "[?pie_chart_revenue_type^43.GetValueToPopType]" }
				revpie44 = { image = "[?pie_chart_revenue_type^44.GetValueToPopType]" }
				revpie45 = { image = "[?pie_chart_revenue_type^45.GetValueToPopType]" }
				revpie46 = { image = "[?pie_chart_revenue_type^46.GetValueToPopType]" }
				revpie47 = { image = "[?pie_chart_revenue_type^47.GetValueToPopType]" }
				revpie48 = { image = "[?pie_chart_revenue_type^48.GetValueToPopType]" }
				revpie49 = { image = "[?pie_chart_revenue_type^49.GetValueToPopType]" }
				revpie50 = { image = "[?pie_chart_revenue_type^50.GetValueToPopType]" }
				revpie51 = { image = "[?pie_chart_revenue_type^51.GetValueToPopType]" }
				revpie52 = { image = "[?pie_chart_revenue_type^52.GetValueToPopType]" }
				revpie53 = { image = "[?pie_chart_revenue_type^53.GetValueToPopType]" }
				revpie54 = { image = "[?pie_chart_revenue_type^54.GetValueToPopType]" }
				revpie55 = { image = "[?pie_chart_revenue_type^55.GetValueToPopType]" }
				revpie56 = { image = "[?pie_chart_revenue_type^56.GetValueToPopType]" }
				revpie57 = { image = "[?pie_chart_revenue_type^57.GetValueToPopType]" }
				revpie58 = { image = "[?pie_chart_revenue_type^58.GetValueToPopType]" }
				revpie59 = { image = "[?pie_chart_revenue_type^59.GetValueToPopType]" }
				revpie60 = { image = "[?pie_chart_revenue_type^60.GetValueToPopType]" }
				revpie61 = { image = "[?pie_chart_revenue_type^61.GetValueToPopType]" }
				revpie62 = { image = "[?pie_chart_revenue_type^62.GetValueToPopType]" }
				revpie63 = { image = "[?pie_chart_revenue_type^63.GetValueToPopType]" }
				revpie64 = { image = "[?pie_chart_revenue_type^64.GetValueToPopType]" }
				revpie65 = { image = "[?pie_chart_revenue_type^65.GetValueToPopType]" }
				revpie66 = { image = "[?pie_chart_revenue_type^66.GetValueToPopType]" }
				revpie67 = { image = "[?pie_chart_revenue_type^67.GetValueToPopType]" }
				revpie68 = { image = "[?pie_chart_revenue_type^68.GetValueToPopType]" }
				revpie69 = { image = "[?pie_chart_revenue_type^69.GetValueToPopType]" }
				revpie70 = { image = "[?pie_chart_revenue_type^70.GetValueToPopType]" }
				revpie71 = { image = "[?pie_chart_revenue_type^71.GetValueToPopType]" }
				revpie72 = { image = "[?pie_chart_revenue_type^72.GetValueToPopType]" }
				revpie73 = { image = "[?pie_chart_revenue_type^73.GetValueToPopType]" }
				revpie74 = { image = "[?pie_chart_revenue_type^74.GetValueToPopType]" }
				revpie75 = { image = "[?pie_chart_revenue_type^75.GetValueToPopType]" }
				revpie76 = { image = "[?pie_chart_revenue_type^76.GetValueToPopType]" }
				revpie77 = { image = "[?pie_chart_revenue_type^77.GetValueToPopType]" }
				revpie78 = { image = "[?pie_chart_revenue_type^78.GetValueToPopType]" }
				revpie79 = { image = "[?pie_chart_revenue_type^79.GetValueToPopType]" }
				revpie80 = { image = "[?pie_chart_revenue_type^80.GetValueToPopType]" }
				revpie81 = { image = "[?pie_chart_revenue_type^81.GetValueToPopType]" }
				revpie82 = { image = "[?pie_chart_revenue_type^82.GetValueToPopType]" }
				revpie83 = { image = "[?pie_chart_revenue_type^83.GetValueToPopType]" }
				revpie84 = { image = "[?pie_chart_revenue_type^84.GetValueToPopType]" }
				revpie85 = { image = "[?pie_chart_revenue_type^85.GetValueToPopType]" }
				revpie86 = { image = "[?pie_chart_revenue_type^86.GetValueToPopType]" }
				revpie87 = { image = "[?pie_chart_revenue_type^87.GetValueToPopType]" }
				revpie88 = { image = "[?pie_chart_revenue_type^88.GetValueToPopType]" }
				revpie89 = { image = "[?pie_chart_revenue_type^89.GetValueToPopType]" }
				revpie90 = { image = "[?pie_chart_revenue_type^90.GetValueToPopType]" }
				revpie91 = { image = "[?pie_chart_revenue_type^91.GetValueToPopType]" }
				revpie92 = { image = "[?pie_chart_revenue_type^92.GetValueToPopType]" }
				revpie93 = { image = "[?pie_chart_revenue_type^93.GetValueToPopType]" }
				revpie94 = { image = "[?pie_chart_revenue_type^94.GetValueToPopType]" }
				revpie95 = { image = "[?pie_chart_revenue_type^95.GetValueToPopType]" }
				revpie96 = { image = "[?pie_chart_revenue_type^96.GetValueToPopType]" }
				revpie97 = { image = "[?pie_chart_revenue_type^97.GetValueToPopType]" }
				revpie98 = { image = "[?pie_chart_revenue_type^98.GetValueToPopType]" }
				revpie99 = { image = "[?pie_chart_revenue_type^99.GetValueToPopType]" }
			#
			#Spen Pie Segments
				spenpie0 = { image = "[?pie_chart_spending_type^0.GetValueToPopType]" }
				spenpie1 = { image = "[?pie_chart_spending_type^1.GetValueToPopType]" }
				spenpie2 = { image = "[?pie_chart_spending_type^2.GetValueToPopType]" }
				spenpie3 = { image = "[?pie_chart_spending_type^3.GetValueToPopType]" }
				spenpie4 = { image = "[?pie_chart_spending_type^4.GetValueToPopType]" }
				spenpie5 = { image = "[?pie_chart_spending_type^5.GetValueToPopType]" }
				spenpie6 = { image = "[?pie_chart_spending_type^6.GetValueToPopType]" }
				spenpie7 = { image = "[?pie_chart_spending_type^7.GetValueToPopType]" }
				spenpie8 = { image = "[?pie_chart_spending_type^8.GetValueToPopType]" }
				spenpie9 = { image = "[?pie_chart_spending_type^9.GetValueToPopType]" }
				spenpie10 = { image = "[?pie_chart_spending_type^10.GetValueToPopType]" }
				spenpie11 = { image = "[?pie_chart_spending_type^11.GetValueToPopType]" }
				spenpie12 = { image = "[?pie_chart_spending_type^12.GetValueToPopType]" }
				spenpie13 = { image = "[?pie_chart_spending_type^13.GetValueToPopType]" }
				spenpie14 = { image = "[?pie_chart_spending_type^14.GetValueToPopType]" }
				spenpie15 = { image = "[?pie_chart_spending_type^15.GetValueToPopType]" }
				spenpie16 = { image = "[?pie_chart_spending_type^16.GetValueToPopType]" }
				spenpie17 = { image = "[?pie_chart_spending_type^17.GetValueToPopType]" }
				spenpie18 = { image = "[?pie_chart_spending_type^18.GetValueToPopType]" }
				spenpie19 = { image = "[?pie_chart_spending_type^19.GetValueToPopType]" }
				spenpie20 = { image = "[?pie_chart_spending_type^20.GetValueToPopType]" }
				spenpie21 = { image = "[?pie_chart_spending_type^21.GetValueToPopType]" }
				spenpie22 = { image = "[?pie_chart_spending_type^22.GetValueToPopType]" }
				spenpie23 = { image = "[?pie_chart_spending_type^23.GetValueToPopType]" }
				spenpie24 = { image = "[?pie_chart_spending_type^24.GetValueToPopType]" }
				spenpie25 = { image = "[?pie_chart_spending_type^25.GetValueToPopType]" }
				spenpie26 = { image = "[?pie_chart_spending_type^26.GetValueToPopType]" }
				spenpie27 = { image = "[?pie_chart_spending_type^27.GetValueToPopType]" }
				spenpie28 = { image = "[?pie_chart_spending_type^28.GetValueToPopType]" }
				spenpie29 = { image = "[?pie_chart_spending_type^29.GetValueToPopType]" }
				spenpie30 = { image = "[?pie_chart_spending_type^30.GetValueToPopType]" }
				spenpie31 = { image = "[?pie_chart_spending_type^31.GetValueToPopType]" }
				spenpie32 = { image = "[?pie_chart_spending_type^32.GetValueToPopType]" }
				spenpie33 = { image = "[?pie_chart_spending_type^33.GetValueToPopType]" }
				spenpie34 = { image = "[?pie_chart_spending_type^34.GetValueToPopType]" }
				spenpie35 = { image = "[?pie_chart_spending_type^35.GetValueToPopType]" }
				spenpie36 = { image = "[?pie_chart_spending_type^36.GetValueToPopType]" }
				spenpie37 = { image = "[?pie_chart_spending_type^37.GetValueToPopType]" }
				spenpie38 = { image = "[?pie_chart_spending_type^38.GetValueToPopType]" }
				spenpie39 = { image = "[?pie_chart_spending_type^39.GetValueToPopType]" }
				spenpie40 = { image = "[?pie_chart_spending_type^40.GetValueToPopType]" }
				spenpie41 = { image = "[?pie_chart_spending_type^41.GetValueToPopType]" }
				spenpie42 = { image = "[?pie_chart_spending_type^42.GetValueToPopType]" }
				spenpie43 = { image = "[?pie_chart_spending_type^43.GetValueToPopType]" }
				spenpie44 = { image = "[?pie_chart_spending_type^44.GetValueToPopType]" }
				spenpie45 = { image = "[?pie_chart_spending_type^45.GetValueToPopType]" }
				spenpie46 = { image = "[?pie_chart_spending_type^46.GetValueToPopType]" }
				spenpie47 = { image = "[?pie_chart_spending_type^47.GetValueToPopType]" }
				spenpie48 = { image = "[?pie_chart_spending_type^48.GetValueToPopType]" }
				spenpie49 = { image = "[?pie_chart_spending_type^49.GetValueToPopType]" }
				spenpie50 = { image = "[?pie_chart_spending_type^50.GetValueToPopType]" }
				spenpie51 = { image = "[?pie_chart_spending_type^51.GetValueToPopType]" }
				spenpie52 = { image = "[?pie_chart_spending_type^52.GetValueToPopType]" }
				spenpie53 = { image = "[?pie_chart_spending_type^53.GetValueToPopType]" }
				spenpie54 = { image = "[?pie_chart_spending_type^54.GetValueToPopType]" }
				spenpie55 = { image = "[?pie_chart_spending_type^55.GetValueToPopType]" }
				spenpie56 = { image = "[?pie_chart_spending_type^56.GetValueToPopType]" }
				spenpie57 = { image = "[?pie_chart_spending_type^57.GetValueToPopType]" }
				spenpie58 = { image = "[?pie_chart_spending_type^58.GetValueToPopType]" }
				spenpie59 = { image = "[?pie_chart_spending_type^59.GetValueToPopType]" }
				spenpie60 = { image = "[?pie_chart_spending_type^60.GetValueToPopType]" }
				spenpie61 = { image = "[?pie_chart_spending_type^61.GetValueToPopType]" }
				spenpie62 = { image = "[?pie_chart_spending_type^62.GetValueToPopType]" }
				spenpie63 = { image = "[?pie_chart_spending_type^63.GetValueToPopType]" }
				spenpie64 = { image = "[?pie_chart_spending_type^64.GetValueToPopType]" }
				spenpie65 = { image = "[?pie_chart_spending_type^65.GetValueToPopType]" }
				spenpie66 = { image = "[?pie_chart_spending_type^66.GetValueToPopType]" }
				spenpie67 = { image = "[?pie_chart_spending_type^67.GetValueToPopType]" }
				spenpie68 = { image = "[?pie_chart_spending_type^68.GetValueToPopType]" }
				spenpie69 = { image = "[?pie_chart_spending_type^69.GetValueToPopType]" }
				spenpie70 = { image = "[?pie_chart_spending_type^70.GetValueToPopType]" }
				spenpie71 = { image = "[?pie_chart_spending_type^71.GetValueToPopType]" }
				spenpie72 = { image = "[?pie_chart_spending_type^72.GetValueToPopType]" }
				spenpie73 = { image = "[?pie_chart_spending_type^73.GetValueToPopType]" }
				spenpie74 = { image = "[?pie_chart_spending_type^74.GetValueToPopType]" }
				spenpie75 = { image = "[?pie_chart_spending_type^75.GetValueToPopType]" }
				spenpie76 = { image = "[?pie_chart_spending_type^76.GetValueToPopType]" }
				spenpie77 = { image = "[?pie_chart_spending_type^77.GetValueToPopType]" }
				spenpie78 = { image = "[?pie_chart_spending_type^78.GetValueToPopType]" }
				spenpie79 = { image = "[?pie_chart_spending_type^79.GetValueToPopType]" }
				spenpie80 = { image = "[?pie_chart_spending_type^80.GetValueToPopType]" }
				spenpie81 = { image = "[?pie_chart_spending_type^81.GetValueToPopType]" }
				spenpie82 = { image = "[?pie_chart_spending_type^82.GetValueToPopType]" }
				spenpie83 = { image = "[?pie_chart_spending_type^83.GetValueToPopType]" }
				spenpie84 = { image = "[?pie_chart_spending_type^84.GetValueToPopType]" }
				spenpie85 = { image = "[?pie_chart_spending_type^85.GetValueToPopType]" }
				spenpie86 = { image = "[?pie_chart_spending_type^86.GetValueToPopType]" }
				spenpie87 = { image = "[?pie_chart_spending_type^87.GetValueToPopType]" }
				spenpie88 = { image = "[?pie_chart_spending_type^88.GetValueToPopType]" }
				spenpie89 = { image = "[?pie_chart_spending_type^89.GetValueToPopType]" }
				spenpie90 = { image = "[?pie_chart_spending_type^90.GetValueToPopType]" }
				spenpie91 = { image = "[?pie_chart_spending_type^91.GetValueToPopType]" }
				spenpie92 = { image = "[?pie_chart_spending_type^92.GetValueToPopType]" }
				spenpie93 = { image = "[?pie_chart_spending_type^93.GetValueToPopType]" }
				spenpie94 = { image = "[?pie_chart_spending_type^94.GetValueToPopType]" }
				spenpie95 = { image = "[?pie_chart_spending_type^95.GetValueToPopType]" }
				spenpie96 = { image = "[?pie_chart_spending_type^96.GetValueToPopType]" }
				spenpie97 = { image = "[?pie_chart_spending_type^97.GetValueToPopType]" }
				spenpie98 = { image = "[?pie_chart_spending_type^98.GetValueToPopType]" }
				spenpie99 = { image = "[?pie_chart_spending_type^99.GetValueToPopType]" }
			#
		}

		dynamic_lists = {
			budget_graph = {
				array = budget_graph_frames
				entry_container = GDP_graph_segment
				value = segment_value
				index = segment_idx
			}
		}
	}
	country_repay_debt_window = {
		window_name = "country_repay_debt_window_container"
		context_type = player_context

		visible = {
			ROOT = {
				has_country_flag = country_economy_view_open
				has_country_flag = country_repay_debt_view_open
			}
		}
		effects = {
			#Decrease Repayment Amount
				country_decrease_debt_repayment_amount_button_click = {
					subtract_from_variable = { debt_repayment_amount = 1 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_shift_click = {
					subtract_from_variable = { debt_repayment_amount = 5 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_control_click = {
					subtract_from_variable = { debt_repayment_amount = 25 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_control_shift_click = {
					subtract_from_variable = { debt_repayment_amount = 100 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}

				country_decrease_debt_repayment_amount_button_right_click = {
					subtract_from_variable = { debt_repayment_amount = 1000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_shift_right_click = {
					subtract_from_variable = { debt_repayment_amount = 5000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_control_right_click = {
					subtract_from_variable = { debt_repayment_amount = 25000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
				country_decrease_debt_repayment_amount_button_control_shift_right_click = {
					subtract_from_variable = { debt_repayment_amount = 100000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount < 0 }
						}
						set_variable = { debt_repayment_amount = 0 }
					}
				}
			#
			#Increase Repayment Amount
				country_increase_debt_repayment_amount_button_click = {
					add_to_variable = { debt_repayment_amount = 1 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_shift_click = {
					add_to_variable = { debt_repayment_amount = 5 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_control_click = {
					add_to_variable = { debt_repayment_amount = 25 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_control_shift_click = {
					add_to_variable = { debt_repayment_amount = 100 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}

				country_increase_debt_repayment_amount_button_right_click = {
					add_to_variable = { debt_repayment_amount = 1000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_shift_right_click = {
					add_to_variable = { debt_repayment_amount = 5000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_control_right_click = {
					add_to_variable = { debt_repayment_amount = 25000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
				country_increase_debt_repayment_amount_button_control_shift_right_click = {
					add_to_variable = { debt_repayment_amount = 100000 }
					if = {
						limit = {
							check_variable = { debt_repayment_amount > treasury }
						}
						set_variable = { debt_repayment_amount = treasury }
						subtract_from_variable = { debt_repayment_amount = 0.5 }
						round_variable = debt_repayment_amount
					}
					if = {
						limit = {
							check_variable = { debt_repayment_amount > 2000000 }
						}
						set_variable = { debt_repayment_amount = 2000000 }
					}
				}
			#

			country_repay_debt_button_click = {
				set_temp_variable = { debt_repayment_temp = debt_repayment_amount }
				set_temp_variable = { country_temp = debt_repayment_country }
				repay_debt = yes
				add_to_variable = { update_state_econ_window = 1 }
				set_variable = { debt_repayment_amount = 0 }
				set_variable = { debt_repayment_country = 0 }
			}
			country_repay_debt_button_shift_click = {
				set_temp_variable = { debt_repayment_temp = debt_repayment_amount }
				set_temp_variable = { country_temp = debt_repayment_country }
				repay_debt = yes
				add_to_variable = { update_state_econ_window = 1 }
				close_repay_debt_window = yes
			}

			country_repay_any_country_button_click = {
				set_variable = { debt_repayment_country = 0 }
			}
			repay_debt_country_button_click = {
				set_variable = { ROOT.debt_repayment_country = THIS }
			}
		}
		triggers = {
			country_repay_any_country_button_click_enabled = {
				NOT = { check_variable = { debt_repayment_country = 0 } }
			}
			repay_debt_country_button_click_enabled = {
				NOT = { check_variable = { ROOT.debt_repayment_country = THIS } }
			}
		}
		dynamic_lists = {
			country_countries_banks_entries = {
				array = debt_to_bank_country
				entry_container = repay_debt_country_entry
				change_scope = yes
			}
		}
	}
	country_borrow_money_window = {
		window_name = "country_borrow_money_window_container"
		context_type = player_context

		visible = {
			ROOT = {
				has_country_flag = country_economy_view_open
				has_country_flag = country_borrow_money_view_open
			}
		}
		effects = {
			#Decrease Borrow Amount
				country_decrease_borrow_money_amount_button_click = {
					subtract_from_variable = { borrow_money_amount = 1 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_shift_click = {
					subtract_from_variable = { borrow_money_amount = 5 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_control_click = {
					subtract_from_variable = { borrow_money_amount = 25 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_control_shift_click = {
					subtract_from_variable = { borrow_money_amount = 100 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}

				country_decrease_borrow_money_amount_button_right_click = {
					subtract_from_variable = { borrow_money_amount = 1000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_shift_right_click = {
					subtract_from_variable = { borrow_money_amount = 5000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_control_right_click = {
					subtract_from_variable = { borrow_money_amount = 25000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
				country_decrease_borrow_money_amount_button_control_shift_right_click = {
					subtract_from_variable = { borrow_money_amount = 100000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount < 0 }
						}
						set_variable = { borrow_money_amount = 0 }
					}
				}
			#
			#Increase Borrow Amount
				country_increase_borrow_money_amount_button_click = {
					add_to_variable = { borrow_money_amount = 1 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_shift_click = {
					add_to_variable = { borrow_money_amount = 5 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_control_click = {
					add_to_variable = { borrow_money_amount = 25 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_control_shift_click = {
					add_to_variable = { borrow_money_amount = 100 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}

				country_increase_borrow_money_amount_button_right_click = {
					add_to_variable = { borrow_money_amount = 1000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_shift_right_click = {
					add_to_variable = { borrow_money_amount = 5000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_control_right_click = {
					add_to_variable = { borrow_money_amount = 25000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
				country_increase_borrow_money_amount_button_control_shift_right_click = {
					add_to_variable = { borrow_money_amount = 100000 }
					if = {
						limit = {
							check_variable = { borrow_money_amount > 2000000 }
						}
						set_variable = { borrow_money_amount = 2000000 }
					}
				}
			#

			country_borrow_money_button_click = {
				set_temp_variable = { borrow_money_temp = borrow_money_amount }
				set_temp_variable = { country_temp = borrow_money_country }
				borrow_money = yes
				add_to_variable = { update_state_econ_window = 1 }
				set_variable = { borrow_money_amount = 0 }
				set_variable = { borrow_money_country = 0 }
				global_bank_update = yes
			}
			country_borrow_money_button_shift_click = {
				set_temp_variable = { borrow_money_temp = borrow_money_amount }
				set_temp_variable = { country_temp = borrow_money_country }
				borrow_money = yes
				add_to_variable = { update_state_econ_window = 1 }
				close_borrow_money_window = yes
				global_bank_update = yes
			}

			country_borrow_from_any_country_button_click = {
				set_variable = { borrow_money_country = 0 }
			}
			borrow_money_country_button_click = {
				set_variable = { ROOT.borrow_money_country = THIS }
			}
		}
		triggers = {
			country_borrow_from_any_country_button_click_enabled = {
				NOT = { check_variable = { borrow_money_country = 0 } }
			}
			borrow_money_country_button_click_enabled = {
				NOT = { check_variable = { ROOT.borrow_money_country = THIS } }
			}
		}
		dynamic_lists = {
			country_countries_banks_entries = {
				array = global_bank_countries
				entry_container = borrow_money_country_entry
				change_scope = yes
			}
		}
	}

	military_production_tab_budget_gui = {
		window_name = "military_production_tab_budget_container"
		context_type = player_context
		parent_window_token = production_tab

		effects = {
			prod_budget_button_click = {
				spending_update = yes
			}
		}

		properties = {
			military_production_icon = {
				image = "[GetCurrencyIcon]"
			}
		}
	}

	population_economy_window = {
		window_name = "population_economy_window_container"
		context_type = player_context

		visible = {
			ROOT = {
				has_country_flag = population_economy_view_open
			}
		}

		triggers = {
			add_new_opportunity_button_click_enabled = {
				check_variable = { treasury > investment_opportunity_generation_cost }
				check_variable = { investment_opportunities^num < investment_opportunities_cap }
				any_controlled_state = {
					NOT = { has_state_flag = current_investment_opportunity_flag }
				}
			}
			fund_all_opportunities_button_click_enabled = {
				check_variable = { investment_fund_spending < investment_fund_target_spending }

				check_variable = { treasury > investment_opportunity_fund_all_cost }
				check_variable = { investment_opportunity_fund_all_cost > 0 }
				check_variable = { investment_opportunities^num > 0 }
			}
			fund_opportunity_button_click_enabled = {
				check_variable = { investment_fund_spending < investment_fund_target_spending }

				set_temp_variable = { cost_temp = investment_opportunity_cost@var:v }
				subtract_from_temp_variable = { cost_temp = investment_opportunity_investment@var:v }
				check_variable = { treasury > cost_temp }
				check_variable = { cost_temp > 0 }
			}
		}

		effects = {
			add_new_opportunity_button_click = {
				subtract_from_variable = { treasury = investment_opportunity_generation_cost }
				create_investment_opportunity = yes
			}
			fund_all_opportunities_button_click = {
				subtract_from_variable = { treasury = investment_opportunity_fund_all_cost }
				for_each_loop = {
					array = investment_opportunities
					value = io_num_temp
					index = ii
					if = {
						limit = {
							check_variable = { investment_opportunity_investment@var:io_num_temp < investment_opportunity_cost@var:io_num_temp }
						}
						set_variable = { investment_opportunity_investment@var:io_num_temp = investment_opportunity_cost@var:io_num_temp }
					}
				}
				set_temp_variable = { i_temp = 0 }
				while_loop_effect = {
					limit = {
						check_variable = { i_temp < investment_opportunities_cap }
					}
					set_temp_variable = { io_num_temp = investment_opportunities^0 }
					evaluate_investment_opportunity = yes

					add_to_temp_variable = { i_temp = 1 }
				}
				investment_opportunities_update = yes
			}
			fund_opportunity_button_click = {
				set_temp_variable = { cost_temp = investment_opportunity_cost@var:v }
				subtract_from_temp_variable = { cost_temp = investment_opportunity_investment@var:v }
        		divide_temp_variable = { cost_temp = modifier@government_investment_efficiency_factor }
				subtract_from_variable = { treasury = cost_temp }
				set_variable = { investment_opportunity_investment@var:v = investment_opportunity_cost@var:v }

				set_temp_variable = { io_num_temp = v }
				evaluate_investment_opportunity = yes
			}
			close_button_click = {
				clr_country_flag = population_economy_view_open
				clr_country_flag = country_new_trade_route_view_open
			}
		}

		properties = {
			line_segment = {
				frame = segment_value
			}
			investment_building_icon = {
				image = "[GetInvestmentOpportunityIcon]"
			}
			currency_icon = {
				image = "[GetCurrencyIcon]"
			}
			fund_all_opportunities_button = {
				image = "[GetCurrencyButton]"
			}
			fund_opportunity_button = {
				image = "[GetCurrencyButton]"
			}
		}

		dynamic_lists = {
			project_entries = {
				array = proj_id
				entry_container = project_entry
				change_scope = no
			}
			corporation_entries = {
				array = corporations
				entry_container = corporation_entry
				change_scope = yes
			}
			investment_opportunities_entries = {
				array = investment_opportunities
				entry_container = investment_opportunity_entry
			}
			economy_graph = {
				array = gdp_graph_frames
				entry_container = GDP_graph_segment
				value = segment_value
				index = segment_idx
			}
		}

	}


	send_credit_gift_gui={
		context_type = diplomatic_action
		window_name = "send_credit_gift_key_gui"
		#parent_window_name = "send_diplomacy_scripted_popup_window"
		visible = {
			#has_country_flag = open_send_credit_gift_action_key_gui
			#always = no
		}
		effects = {
			increase_credits_btn_click = {
				ROOT = {
					subtract_from_variable = { treasury = 100 }
					add_to_variable = { temp_credits_to_send = 100 }
				}
			}
			increase_credits_btn_shift_click = {
				ROOT = {
					if = {
						limit = {
							check_variable = { treasury > 1000 }
						}
						subtract_from_variable = { treasury = 1000 }
						add_to_variable = { temp_credits_to_send = 1000 }
					}
					else = {
						subtract_from_variable = { treasury = 100 }
						add_to_variable = { temp_credits_to_send = 100 }
					}
				}
			}
			decrease_credits_btn_click = {
				ROOT = {
					subtract_from_variable = { temp_credits_to_send = 100 }
					add_to_variable = { treasury = 100 }
				}
			}
			decrease_credits_btn_shift_click = {
				ROOT = {
					if = {
						limit = {
							check_variable = { temp_credits_to_send > 1000 }
						}
						subtract_from_variable = { temp_credits_to_send = 1000 }
						add_to_variable = { treasury = 1000 }
					}
					else = {
						add_to_variable = { treasury = temp_credits_to_send }
						set_variable = { temp_credits_to_send = 0 }
					}
				}
			}
		}
		triggers={
			decrease_credits_btn_click_enabled={
				ROOT={
					check_variable = {
						temp_credits_to_send > 0
					}
				}
			}
			increase_credits_btn_click_enabled={
				ROOT={
					check_variable = {
						treasury > 100
					}
				}
			}
		}
	}
}